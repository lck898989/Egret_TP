var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},HttpConnect=function(){function e(){}return e.prototype.SendHttpMsg=function(e,t,n){Log.trace("debug","请求消息= "+e);var r=new HLoad;r.time=egret.getTimer(),r.hander=t,void 0!==n&&(r.isJson=n),r.responseType=egret.HttpResponseType.TEXT,r.open(this.apiUrl,egret.HttpMethod.POST),r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),r.send(e),r.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),r.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this),r.addEventListener(egret.ProgressEvent.PROGRESS,this.onPostProgress,this)},e.prototype.SendUrlHttpMsg=function(e,t,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=egret.HttpMethod.POST),Log.trace("debug","请求消息= "+t);var o=new HLoad;o.time=egret.getTimer(),o.hander=n,void 0!==r&&(o.isJson=r),o.responseType=egret.HttpResponseType.TEXT,o.open(e,i),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.send(t),o.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),o.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this),o.addEventListener(egret.ProgressEvent.PROGRESS,this.onPostProgress,this)},e.prototype.onPostComplete=function(e){var t=e.currentTarget;if(Log.trace("debug","回来消息用时= "+(egret.getTimer()-t.time)),Log.trace("debug","消息："+JSON.stringify(t.response)),t.hander)if(t.isJson){var n=JSON.parse(t.response);t.hander.executeWith([n])}else t.hander.executeWith([t.response])},e.prototype.onPostIOError=function(e){Log.trace("debug","post error : "+e)},e.prototype.onPostProgress=function(e){Log.trace("debug","post progress : "+Math.floor(100*e.bytesLoaded/e.bytesTotal)+"%")},e}();__reflect(HttpConnect.prototype,"HttpConnect");var TcpServer=function(){function e(){this.init()}return e.sendMessages=function(t,n){e._socket&&e._socket.getConnected()&&e._socket.sendPackage(t,n)},e.close=function(){e._socket&&e._socket.getConnected()&&e._socket.close()},e.unUseFul=function(){close(),GameSocketNew.setInstanceNull(),e._socket=null},e.hadSocket=function(){return e._socket?!0:!1},e.prototype.init=function(){e._socket=GameSocketNew.getInstance(),e._socket.register(this)},e.prototype.connect=function(t,n){e._socket||this.init(),e._socket.getConnected()||e._socket.connect(t,n)},e.prototype.getConnected=function(){return e._socket?e._socket.getConnected():!1},e.prototype.onConnect=function(){},e.prototype.onMessageReceived=function(e,t){},e.prototype.onDisConnect=function(){this.onLoseConnectionWithServer()},e.prototype.onConnectError=function(){this.showErrorMessageContent(),this.receiveIOError()},e.prototype.showErrorMessageContent=function(){},e.prototype.receiveIOError=function(){close(),this.onLoseConnectionWithServer()},e.prototype.onLoseConnectionWithServer=function(){},e}();__reflect(TcpServer.prototype,"TcpServer",["IMessageListener"]);var BaseClass=function(){function e(){}return e.getInstance=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this;if(!n._instance){var r=e.length;0===r?n._instance=new n:1===r?n._instance=new n(e[0]):2===r?n._instance=new n(e[0],e[1]):3===r?n._instance=new n(e[0],e[1],e[2]):4===r?n._instance=new n(e[0],e[1],e[2],e[3]):5===r&&(n._instance=new n(e[0],e[1],e[2],e[3],e[4]))}return n._instance},e}();__reflect(BaseClass.prototype,"BaseClass");var BaseSound=function(){function e(){this._cache={},this._loadingCache=new Array,App.TimerManager.doTimer(6e4,0,this.dealSoundTimer,this)}return e.prototype.getSound=function(e){var t=RES.getRes(e);if(t)this._cache[e]&&(this._cache[e]=egret.getTimer());else{if(-1!=this._loadingCache.indexOf(e))return null;this._loadingCache.push(e),RES.getResAsync(e,this.onResourceLoadComplete,this)}return t},e.prototype.loadedPlay=function(e){},e.prototype.checkCanClear=function(e){return!0},e.prototype.dealSoundTimer=function(){for(var e=egret.getTimer(),t=Object.keys(this._cache),n=0,r=t.length;r>n;n++){var i=t[n];this.checkCanClear(i)&&e-this._cache[i]>=SoundManager.CLEAR_TIME&&(delete this._cache[i],RES.destroyRes(i))}},e.prototype.onResourceLoadComplete=function(e,t){var n=this._loadingCache.indexOf(t);-1!=n&&(this._loadingCache.splice(n,1),this._cache[t]=egret.getTimer(),this.loadedPlay(t))},e}();__reflect(BaseSound.prototype,"BaseSound");var one;!function(e){var t=function(t){function n(){var n=t.call(this)||this;return n.domNode=new e.DOMNode,n.domNode.mapDisplayObject(n),n.addEventListener(egret.Event.ADDED_TO_STAGE,n.addToStage,n),n.addEventListener(egret.Event.REMOVED_FROM_STAGE,n.removeFromStage,n),n.$renderNode=new egret.sys.RenderNode,n}return __extends(n,t),n.prototype.bind=function(e){this.domNode.bind(e)},n.prototype.unbind=function(){this.domNode.unbind()},n.prototype.removeFromStage=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.onResize,this),this.domNode.hide(),this.tempStage=null},n.prototype.getDomNode=function(){return this.domNode},n.prototype.addToStage=function(){egret.Capabilities.runtimeType==egret.RuntimeType.WEB&&(this.domNode.show(),this.domNode.updatePosition(),this.tempStage=this.stage,this.addEventListener(egret.Event.ENTER_FRAME,this.onResize,this))},n.prototype.onResize=function(){this.domNode&&this.domNode.updatePosition()},n}(egret.DisplayObject);e.WebNode=t,__reflect(t.prototype,"one.WebNode")}(one||(one={}));var ResourceUtils=function(e){function t(){var t=e.call(this)||this;return t._configs=new Array,t._groups={},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,t.onResourceLoadComplete,t),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,t.onResourceProgress,t),t}return __extends(t,e),t.prototype.loadGroup=function(e,t,n,r){this._groups[e]=[t,n,r],RES.loadGroup(e)},t.prototype.loadGroups=function(e,t,n,r,i){RES.createGroup(e,t),this.loadGroup(e,n,r,i)},t.prototype.pilfererLoadGroup=function(e){RES.loadGroup("pilferer_"+e,-1)},t.prototype.addConfig=function(e,t){this._configs.push([e,t])},t.prototype.loadConfig=function(e,t){this._onConfigComplete=e,this._onConfigCompleteTarget=t,this.loadNextConfig()},t.prototype.loadNextConfig=function(){if(0==this._configs.length)return this._onConfigComplete.call(this._onConfigCompleteTarget),this._onConfigComplete=null,void(this._onConfigCompleteTarget=null);var e=this._configs.shift();RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),RES.loadConfig(e[0],e[1])},t.prototype.onConfigCompleteHandle=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),this.loadNextConfig()},t.prototype.onResourceLoadComplete=function(e){var t=e.groupName;if(this._groups[t]){var n=this._groups[t][0],r=this._groups[t][2];null!=n&&n.call(r),this._groups[t]=null,delete this._groups[t]}},t.prototype.onResourceProgress=function(e){var t=e.groupName;if(this._groups[t]){var n=this._groups[t][1],r=this._groups[t][2];null!=n&&n.call(r,e.itemsLoaded,e.itemsTotal)}},t}(BaseClass);__reflect(ResourceUtils.prototype,"ResourceUtils");var DicErrorCode=function(){function e(){}return e.prototype.initFromJson=function(e){this.objErrorMsg=RES.getRes(e)},e.prototype.getDesc=function(e){var t=this.objErrorMsg[e];return t?t:"不存在的错误号"},e}();__reflect(DicErrorCode.prototype,"DicErrorCode",["IReadJson"]);var DicServerInfo=function(){function e(){this.serverUrl="",this.usehttps=0}return e.prototype.initFromJson=function(e){var t=RES.getRes(e);BaseFunc.objToClass(t,this)},e}();__reflect(DicServerInfo.prototype,"DicServerInfo",["IReadJson"]);var BGUpManager=function(){function e(){this._mask=new eui.UILayer,this.darkSprite=new eui.Rect,this.darkSprite.fillColor=0,this.darkSprite.top=0,this.darkSprite.bottom=0,this._mask.addChild(this.darkSprite)}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.prototype.reSizePop=function(){if(!(this._mask.numChildren<=1))for(var e=0;e<this._mask.numChildren;e++){var t=this._mask.getChildAt(e);t instanceof UIObject&&this.resizePannel(t)}},e.prototype.resizePannel=function(e){var t=e.width,n=e.height;e.x=GM.gamec.curWidth()/2-t/2,e.y=GM.gamec.curHeight()/2-n/2},e.prototype.addBGUp=function(e,t){this.darkSprite.width=GM.gamec.curWidth(),this.darkSprite.height=GM.gamec.curHeight(),this.darkSprite.alpha=t,this.darkSprite.touchEnabled=!0,this.darkSprite.visible=!0,e.contains(this._mask)||e.addChild(this._mask)},e.prototype.removePopUp=function(e,t){void 0===t&&(t=0);var n=function(e){};this.darkSprite&&egret.Tween.get(this.darkSprite).to({alpha:0},100).call(n,this,[this.darkSprite])},e.prototype.close=function(){this._mask.numChildren>1?this._mask.swapChildrenAt(this._mask.getChildIndex(this.darkSprite),this._mask.numChildren-2):this._mask.parent&&this._mask.parent.removeChild(this._mask)},e.prototype.closeAllDlg=function(){for(;this._mask.numChildren>1;){var e=this._mask.getChildAt(0);e instanceof UIObject?(this._mask.removeChild(e),UIPool.getInstance().destroyObject(e)):this._mask.swapChildrenAt(this._mask.getChildIndex(this.darkSprite),this._mask.numChildren-1)}this.parent&&this.parent.contains(this._mask)&&this.parent.removeChild(this._mask)},e}();__reflect(BGUpManager.prototype,"BGUpManager");var CommunicationManager=function(){function CommunicationManager(){this.offlineRev=!1,this.curPage=-1,lcp.LListener.getInstance().addEventListener("tky_topage",this.goPage,this),lcp.LListener.getInstance().addEventListener("tky_makepost",this.tkyMakePostAction,this)}return CommunicationManager.getInstance=function(){return CommunicationManager.instance||(CommunicationManager.instance=new CommunicationManager),CommunicationManager.instance},CommunicationManager.prototype.addListener=function(e){window.addEventListener(e,this.execMessage.bind(this),!1)},CommunicationManager.prototype.init=function(e){Log.trace("当前的身份：",GM.pm.role),0==GM.pm.role?lcp.LListener.getInstance().addEventListener("tky_offlinepost",this.tkyOfflineRevAction,this):this.offlineRev=!0,this.courcewareName=e;var t=RES.getRes(this.courcewareName+"_json");this.mOpData=[],t?(this.coursewareArray=t.courseware,CommunicationManager.getInstance().makePostMessage("onPagenum","totalPages",this.coursewareArray.length),this.loadComplete()):this.coursewareArray=[]},CommunicationManager.prototype.loadComplete=function(){var e=1562/1348;CommunicationManager.getInstance().makePostMessage("onLoadComplete","coursewareRatio",e)},CommunicationManager.prototype.execMessage=function(e){if(e.source===window.parent){var t;try{t=JSON.parse(e.data)}catch(n){Log.trace("error",n)}if(Log.trace("收到的信令",JSON.stringify(t)),"onJumpPage"===t.method){var r=Number(t.toPage);lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent(BaseDefines.TKCLOUD_TYPE.TO_PAGE,r,!1)),this.curPage=r,this.mOpData[this.curPage]=[]}else if("onFileMessage"===t.method){e.data;!this.offlineRev&&this.mOpData.length>0&&this.mOpData[this.curPage].push(t),UIPool.getInstance().execMessage(t)}}},CommunicationManager.prototype.goTargetPageHandle=function(pageIndex){if(0>=pageIndex)return void Log.trace("error","找不到指定页面="+pageIndex);var pageJumpNum=pageIndex-1;if(this.coursewareArray&&this.coursewareArray.length>pageJumpNum){var pageJumpOjb=this.coursewareArray[pageJumpNum],_pageJumpData=null;pageJumpOjb.hasOwnProperty("data")&&(_pageJumpData=pageJumpOjb.data),GM.scene.runScene(eval(pageJumpOjb.name),pageJumpOjb.curLoad,_pageJumpData);var nextPageJumpOjb=null;this.coursewareArray.length>pageJumpNum+1&&(nextPageJumpOjb=this.coursewareArray[pageJumpNum+1],this.loadNextPage(nextPageJumpOjb.curLoad)),Log.trace("debug","已经跳往指定页面,page="+pageJumpNum)}else Log.trace("error","跳往指定页失败,page="+pageJumpNum)},CommunicationManager.prototype.makePostMessage=function(e,t,n){var r=new Object;r.method=e,r[t]=n,window.parent.postMessage(JSON.stringify(r),"*"),Log.trace("发出的信令",JSON.stringify(r))},CommunicationManager.prototype.tkyOfflineRevAction=function(e){if(lcp.LListener.getInstance().removeEventListener("tky_offlinepost",this.tkyOfflineRevAction,this),this.offlineRev=!0,this.mOpData&&this.mOpData[this.curPage]&&this.mOpData[this.curPage].length>0){for(var t=this.mOpData[this.curPage],n=0,r=t;n<r.length;n++){var i=r[n];UIPool.getInstance().execMessage(i)}this.mOpData[this.curPage]=[]}},CommunicationManager.prototype.tkyMakePostAction=function(e){Log.trace("debug",e.param);var t=e.param;this.makePostMessage(t.method,t.keyName,t.value)},CommunicationManager.prototype.goPage=function(e){Log.trace("debug",e.param);var t=parseInt(e.param);this.goTargetPageHandle(t)},CommunicationManager.prototype.loadNextPage=function(e){ResLoad.getInstance().LoadRes(e)},CommunicationManager}();__reflect(CommunicationManager.prototype,"CommunicationManager");var DlgManager=function(){function e(){}return e.prototype.popDlg=function(e,t,n,r,i,o){if(void 0===t&&(t=""),void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=1),void 0===o&&(o=.6),t){var a=new Handler(this,this.onLoad,[e,n,r,!0,i,o]);ResLoad.getInstance().LoadRes(t,a)}else{var s=this.makeDlg(e,n,r);this.addPopDlg(s,i,o)}},e.prototype.popClickDlg=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null);var r=this.makeDlg(e,t,n);PopUpManager.getInstance().addPopUp(r,!1,0,0,0,!1,0)},e.prototype.dlgClose=function(e,t){void 0===t&&(t=0);var n=UIPool.getInstance().getObject(e);n&&(PopUpManager.getInstance().removePopUp(n,t),UIPool.getInstance().destroyObject(n))},e.prototype.closeAllDlg=function(){PopUpManager.getInstance().closeAllDlg()},e.prototype.makeDlg=function(e,t,n){var r=UIPool.getInstance().createObject(e);return r._closeHander=t,r.data=n,r},e.prototype.onLoad=function(e,t,n,r,i,o,a){var s=this.makeDlg(e,t,n);this.addPopDlg(s,i,o)},e.prototype.addPopDlg=function(e,t,n){void 0===t&&(t=0),PopUpManager.getInstance().addPopUp(e,!0,0,0,t,!1,n)},e}();__reflect(DlgManager.prototype,"DlgManager");var GameLayerManager=function(e){function t(){var t=e.call(this)||this;return t.sceneLayer=new eui.UILayer,t.mainLayer=new eui.UILayer,t.panelLayer=new eui.UILayer,t.effectLayer=new eui.UILayer,t.maskLayer=new eui.UILayer,t.loadLayer=new eui.UILayer,t.init(),t}return __extends(t,e),t.gameLayer=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.init=function(){this.touchThrough=!0,this.sceneLayer.touchThrough=!0,this.mainLayer.touchThrough=!0,this.panelLayer.touchThrough=!0,this.effectLayer.touchThrough=!0,this.maskLayer.touchThrough=!0,this.loadLayer.touchThrough=!0,this.addChild(this.sceneLayer),this.addChild(this.mainLayer),this.addChild(this.panelLayer),this.addChild(this.effectLayer),this.addChild(this.maskLayer),this.addChild(this.loadLayer)},t}(eui.UILayer);__reflect(GameLayerManager.prototype,"GameLayerManager");var JsonManager=function(){function e(){this._jsonArry=[{DicServerInfo:DicServerInfo,name:"serverInfo_json"}],this.realClass=new Object,this.realName=new Object,this._closeHander=null,this._proHander=null}return e.prototype.getClass=function(e){return this.realClass[e]},e.prototype.init=function(){this.makeClass()},e.prototype.loadJson=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null),this._closeHander=t,this._proHander=n,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup(e)},e.prototype.makeClass=function(){for(var e=this,t=e._jsonArry.length,n=0;t>n;n++){var r=e._jsonArry[n];for(var i in r){var o=r.name;if("name"!==String(i)){var a=new r[i];a.constructor.apply(a),e.realClass[i]=a,e.realName[o]=i}}}},e.prototype.onResourceLoadComplete=function(e){this.clearResLoad();for(var t=e.groupName,n=RES.getGroupByName(t),r=n.length,i=0;r>i;i++){var o=n[i],a=this.getClass(this.realName[o.data.name]),s=a;s&&s.initFromJson(o.data.name)}this._closeHander&&this._closeHander.executeWith([t])},e.prototype.onResourceLoadError=function(e){Log.trace("debug",e),Log.trace("debug","json文件加载失败 = "+e.groupName)},e.prototype.onResourceProgress=function(e){this._proHander&&this._proHander.executeWith([e.itemsLoaded,e.itemsTotal])},e.prototype.clearResLoad=function(){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this)},e}();__reflect(JsonManager.prototype,"JsonManager");var LocalStorageManager=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e}();__reflect(LocalStorageManager.prototype,"LocalStorageManager");var PlayerManager=function(){function e(){this.role=-2}return e.prototype.init=function(){var e=this.getParamData();this.role=e.role},e.prototype.getParamData=function(){var e=window.location.search,t={};return""!=e&&e.slice(1).split("&").forEach(function(e){var n=e.split("=");t[n[0]]=n[1]}),t},e}();__reflect(PlayerManager.prototype,"PlayerManager");var PopUpManager=function(){function e(){this._mask=new eui.UILayer,this.darkSprite=new eui.Rect,this.darkSprite.fillColor=0,this.darkSprite.top=0,this.darkSprite.bottom=0,this._mask.addChild(this.darkSprite)}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.reSizePop=function(){if(!(this._mask.numChildren<=1))for(var e=0;e<this._mask.numChildren;e++){var t=this._mask.getChildAt(e);t instanceof UIObject&&this.resizePannel(t)}},e.prototype.resizePannel=function(e){var t=e.width,n=e.height;e.x=GM.gamec.curWidth()/2-t/2,e.y=GM.gamec.curHeight()/2-n/2},e.prototype.addPopUp=function(e,t,n,r,i,o,a){if(void 0===t&&(t=!1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=!1),!GameLayerManager.gameLayer().panelLayer.contains(e)){e.scaleX=1,e.scaleY=1,e.x=0,e.y=0,e.alpha=1,t?(this.darkSprite.width=GM.gamec.curWidth(),this.darkSprite.height=GM.gamec.curHeight(),this.darkSprite.alpha=a,this.darkSprite.touchEnabled=!0,this.darkSprite.visible=!0):this.darkSprite.visible=!1,this._mask.left=0,this._mask.right=0,this._mask.addChild(e),this._mask.swapChildrenAt(this._mask.getChildIndex(this.darkSprite),this._mask.numChildren-2),GameLayerManager.gameLayer().panelLayer.contains(this._mask)||GameLayerManager.gameLayer().panelLayer.addChild(this._mask),GM.gamec.curPanel=e,0!==n?(e.x=GM.gamec.curWidth()/2-n/2,e.y=GM.gamec.curHeight()/2-r/2):(n=e.width,r=e.height,e.x=GM.gamec.curWidth()/2-n/2,e.y=GM.gamec.curHeight()/2-r/2),e.x<0&&(e.x=0),e.y<0&&(e.y=0);var s=GM.gamec.curWidth()/2-n/2,c=GM.gamec.curHeight()/2-r/2;switch(i){case 0:break;case 1:e.alpha=0,e.scaleX=.5,e.scaleY=.5,e.x=e.x+n/4,e.y=e.y+r/4,egret.Tween.get(e).to({alpha:1,scaleX:1,scaleY:1,x:e.x-n/4,y:e.y-r/4},300,egret.Ease.backOut);break;case 2:e.alpha=0,e.scaleX=.5,e.scaleY=.5,e.x=e.x+n/4,e.y=e.y+r/4,egret.Tween.get(e).to({alpha:1,scaleX:1,scaleY:1,x:e.x-n/4,y:e.y-r/4},600,egret.Ease.elasticOut);break;case 3:o?(e.x=-n,egret.Tween.get(e).to({x:s},500,egret.Ease.cubicOut)):(e.x=-n,egret.Tween.get(e).to({x:0},500,egret.Ease.cubicOut));break;case 4:o?(e.x=n,egret.Tween.get(e).to({x:s},500,egret.Ease.cubicOut)):(e.x=n,egret.Tween.get(e).to({x:0},500,egret.Ease.cubicOut));break;case 5:e.y=-r,egret.Tween.get(e).to({y:c},500,egret.Ease.cubicOut);break;case 6:o?(e.y=GM.gamec.curHeight(),egret.Tween.get(e).to({y:c},500,egret.Ease.cubicOut)):(e.y=r,egret.Tween.get(e).to({y:0},500,egret.Ease.cubicOut))}}},e.prototype.removePopUp=function(e,t){void 0===t&&(t=0);var n=function(e){};switch(this.darkSprite&&egret.Tween.get(this.darkSprite).to({alpha:0},100).call(n,this,[this.darkSprite]),t){case 0:break;case 1:egret.Tween.get(e).to({alpha:0,scaleX:0,scaleY:0,x:e.x+e.width/2,y:e.y+e.height/2},300);break;case 2:break;case 3:egret.Tween.get(e).to({x:e.width},500,egret.Ease.cubicOut);break;case 4:egret.Tween.get(e).to({x:-e.width},500,egret.Ease.cubicOut);break;case 5:egret.Tween.get(e).to({y:e.height},500,egret.Ease.cubicOut);break;case 6:egret.Tween.get(e).to({y:-e.height},500,egret.Ease.cubicOut)}var r=500;0===t&&(r=0),egret.setTimeout(this.close,this,r,e)},e.prototype.close=function(e){this._mask.contains(e)&&this._mask.removeChild(e),this._mask.numChildren>1?this._mask.swapChildrenAt(this._mask.getChildIndex(this.darkSprite),this._mask.numChildren-2):GameLayerManager.gameLayer().panelLayer.contains(this._mask)&&GameLayerManager.gameLayer().panelLayer.removeChild(this._mask)},e.prototype.closeAllDlg=function(){for(;this._mask.numChildren>1;){var e=this._mask.getChildAt(0);e instanceof UIObject?(this._mask.removeChild(e),UIPool.getInstance().destroyObject(e)):this._mask.swapChildrenAt(this._mask.getChildIndex(this.darkSprite),this._mask.numChildren-1)}GameLayerManager.gameLayer().panelLayer.contains(this._mask)&&GameLayerManager.gameLayer().panelLayer.removeChild(this._mask)},e}();__reflect(PopUpManager.prototype,"PopUpManager");var ResInfo=function(){function e(){this._endHander=null,this._proHander=null,this._loadDlg=!1,this._groups="",this._sec=0}return e}();__reflect(ResInfo.prototype,"ResInfo");var ResLoad=function(){function e(){this._progressHander=null,this._callBackMap={},this._callBackQueue=[]}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.LoadRes=function(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n=null),Log.trace("debug","加载的资源组: "+e),""===e)return void Log.trace("error","加载的资源组名称为空");if(RES.isGroupLoaded(e))return Log.trace("debug","资源组: "+e+"已加载过"),void(t&&t.executeWith([e]));var r=this._callBackMap[e];return r?void r.push(t):(this._callBackMap[e]=[t],RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),void RES.loadGroup(e))},e.prototype.LoadResByQueue=function(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n=null),Log.trace("debug","加载的资源组: "+e),""===e)return void Log.trace("error","加载的资源组名称为空");if(RES.isGroupLoaded(e))return Log.trace("debug","资源组: "+e+"已加载过"),void(t&&t.executeWith([e]));lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent("show_wait"));var r=this._callBackQueue.length;this._callBackQueue[r]={name:e,handler:t,done:!1,loaded:!1},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup(e)},e.prototype.executeQueue=function(e){for(var t=this._callBackQueue.length,n=0;t>n;n++){var r=this._callBackQueue[n];if(r&&!r.done){if(!r.loaded)break;r.done=!0;var i=r.handler;Log.trace("debug","==资源组加载完成执行回调=="+r.name),lcp.LListener.getInstance().dispatchEvent(new lcp.LEvent("hide_wait")),i&&i.executeWith([r.name])}}},e.prototype.onResourceLoadComplete=function(e){if(Log.trace("debug","资源组 "+e.groupName+" 加载完成"),e&&e.groupName){for(var t=this._callBackQueue.length,n=0;t>n;n++){var r=this._callBackQueue[n];r&&r.name===e.groupName&&(r.loaded=!0)}this.executeQueue(e.groupName);var i=this._callBackMap[e.groupName];delete this._callBackMap[e.groupName];for(var o=i?i.length:0,a=0;o>a;a++){var s=i[a];s&&s.executeWith([e.groupName])}}},e.prototype.onResourceLoadError=function(e){Log.trace("debug","图片资源加载错误"+e)},e.prototype.onResourceProgress=function(e){this._progressHander&&this._progressHander.executeWith([e.itemsLoaded,e.itemsTotal])},e.prototype.clearResLoad=function(){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this)},e}();__reflect(ResLoad.prototype,"ResLoad");var SceneInfo=function(){function e(){this.classFactory=null,this.resName="",this.data=null}return e}();__reflect(SceneInfo.prototype,"SceneInfo");var SceneManager=function(){function e(){this._oldScene=null,this._currScene=null,this._loadingScene=!1,this._loadArray=new Array}return e.prototype.runScene=function(e,t,n){return void 0===n&&(n=null),Log.trace("debug","运行前场景========"+e.key+"===="+this._loadingScene),this._loadingScene?void this.insertSceneInfo(e,t,n):void(this.addNext()||(this._loadingScene=!0,this._currScene=e,this._data=n,ResLoad.getInstance().LoadResByQueue(t,new Handler(this,this.loadEnd))))},e.prototype.loadEnd=function(e){this._oldScene&&GameLayerManager.gameLayer().sceneLayer.contains(this._oldScene)&&(UIPool.getInstance().destroyObject(this._oldScene),GameLayerManager.gameLayer().sceneLayer.removeChild(this._oldScene)),Log.trace("debug","运行后场景==="+this._currScene.key);var t=UIPool.getInstance().createObject(this._currScene);if(t)if(GameLayerManager.gameLayer().sceneLayer.contains(t))Log.trace("debug","画布中已经有该场景:"+this._currScene.key);else{Log.trace("debug","画布中没有该场景:"+this._currScene.key),t.data=this._data;var n=GameLayerManager.gameLayer().sceneLayer.addChild(t);n?this._oldScene=t:Log.trace("debug","加入场景失败")}this._loadArray.length<=0&&(this._loadingScene=!1),this.addNext()},e.prototype.insertSceneInfo=function(e,t,n){void 0===n&&(n=null);var r=new SceneInfo;r.classFactory=e,r.resName=t,r.data=n,this._loadArray.push(r)},e.prototype.addNext=function(){if(this._loadArray.length<=0)return!1;this._loadingScene=!0;var e=this._loadArray.shift();return this._currScene=e.classFactory,this._data=e.data,ResLoad.getInstance().LoadResByQueue(e.resName,new Handler(this,this.loadEnd)),!0},e}();__reflect(SceneManager.prototype,"SceneManager");var SoundManager=function(e){function t(){var t=e.call(this)||this;return t.bg=new SoundBg,t.effect=new SoundEffects,t.bgVolume=.5,t.effectVolume=.5,t.bgOn=!0,t.effectOn=!0,t.bg.setVolume(t.bgVolume),t.effect.setVolume(t.effectVolume),t}return __extends(t,e),t.prototype.playEffect=function(e){t.IS_OPEN_SOUND&&this.effectOn&&this.effect.play(e,this.effectVolume)},t.prototype.stopEffect=function(){this.effect.stop()},t.prototype.playBg=function(e,n,r,i){void 0===n&&(n=.5),void 0===r&&(r=0),void 0===i&&(i=null),t.IS_OPEN_SOUND&&(this.currBg!=e&&this.bg&&this.bg.stop(),this.currBg=e,this.bgOn&&this.bg.play(e,n,r,i))},t.prototype.continuePlayBg=function(){t.IS_OPEN_SOUND&&this.bg.continuePlay()},t.prototype.stopBg=function(){this.bg.stop()},t.prototype.setEffectOn=function(e){this.effectOn=e},t.prototype.setBgOn=function(e){this.bgOn=e,this.bgOn?this.currBg&&this.playBg(this.currBg,0):this.stopBg()},t.prototype.setBgVolume=function(e){e=Math.min(e,1),e=Math.max(e,0),this.bgVolume=e,this.bg.setVolume(this.bgVolume)},t.prototype.getBgVolume=function(){return this.bgVolume},t.prototype.setEffectVolume=function(e){e=Math.min(e,1),e=Math.max(e,0),this.effectVolume=e,this.effect.setVolume(this.effectVolume)},t.prototype.getEffectVolume=function(){return this.effectVolume},t.CLEAR_TIME=18e4,t.IS_OPEN_SOUND=!0,t}(BaseClass);__reflect(SoundManager.prototype,"SoundManager");var GameSocketNew=function(){function e(){if(e.instance)throw new Error("GameSocket instance has already been constructed!");e.instance=this,e.connected=!1}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.setInstanceNull=function(){e.instance=null},e.prototype.register=function(e){if(!e)throw new Error("Cannot registe a null hanlder to GameSocket");this.listener=e},e.prototype.unRegister=function(){this.listener=null},e.prototype.getConnected=function(){return e.connected},e.prototype.connect=function(t,n){Log.trace("debug","GameSocketNew.connect()"),this.resetConnect();var r="wss://"+t+":"+n;Log.trace("debug","wss="+r);var i=GM.jm.getClass("DicServerInfo");1==i.usehttps?e.socket.connectByUrl(r):e.socket.connect(t,n)},e.prototype.close=function(){e.socket&&e.socket.connected&&e.socket.close()},e.prototype.sendPackage=function(t,n){if(!e.socket.connected)return void Log.trace("debug","GameSocket.sendPackage(), 无连接");var r=new egret.ByteArray;r.writeShort(n.length+4),r.writeShort(t),r.writeBytes(n,0,n.length),r.position=0,e.socket.writeBytes(r),e.socket.flush()},e.prototype.init=function(){e.socket=new egret.WebSocket,e.socket.type=egret.WebSocket.TYPE_BINARY,e.socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.revSocketDataHandler,this),e.socket.addEventListener(egret.Event.CONNECT,this.connectHandler,this),e.socket.addEventListener(egret.Event.CLOSE,this.closeHandler,this),e.socket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.errorHandler,this)},e.prototype.resetConnect=function(){e.socket&&(e.socket.removeEventListener(egret.ProgressEvent.SOCKET_DATA,this.revSocketDataHandler,this),e.socket.removeEventListener(egret.Event.CONNECT,this.connectHandler,this),e.socket.removeEventListener(egret.Event.CLOSE,this.closeHandler,this),e.socket.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.errorHandler,this),e.socket=null),this.init()},e.prototype.connectHandler=function(t){Log.trace("debug","GameSocket.connectHandler(), socket 连接成功"),e.connected=!0,this.excuteHandle(egret.Event.CONNECT,t)},e.prototype.revSocketDataHandler=function(t){Log.trace("debug","WebSocket receiveData");var n=new egret.ByteArray;e.socket.readBytes(n),n.position=0;var r=n.readShort(),i=n.readShort();Log.trace("debug","packLen",r,"msgId",i);var o=new egret.ByteArray;o.writeBytes(n,0,r),o.position=4,this.listener.onMessageReceived(i,o)},e.prototype.closeHandler=function(t){Log.trace("debug","WebSocket close"),e.connected=!1,this.excuteHandle(egret.Event.CLOSE,t)},e.prototype.errorHandler=function(t){Log.trace("debug","egret io_error"),e.connected=!1,this.excuteHandle(egret.IOErrorEvent.IO_ERROR,t)},e.prototype.excuteHandle=function(e,t){switch(e){case egret.Event.CONNECT:this.listener.onConnect();break;case egret.Event.CLOSE:this.listener.onDisConnect(),Log.trace("debug","GameSocket.excuteHandle(), 数据连接关闭");break;case egret.IOErrorEvent.IO_ERROR:this.listener.onDisConnect(),Log.trace("debug","GameSocket.excuteHandle(), 数据连接异常!")}},e.connected=!1,e}();__reflect(GameSocketNew.prototype,"GameSocketNew");var GM=function(){function e(){}return e.init=function(){this.gamec=new GameConfigManager,this.gamec.init(),this.pm=new PlayerManager,this.pm.init(),this.jm=new JsonManager,this.jm.init(),this.dlg=new DlgManager,this.scene=new SceneManager,this.sound=new SoundManager,this.debugKey=new HashMap,this.debugKey.put("debug",""),CommunicationManager.getInstance().addListener("message"),Log.trace("version","FrameworkVersion:"+BaseDefines.FrameworkVersion)},e.setTime=function(e){this._serverTime=Number(e),this._curTime=egret.getTimer()},e.getTime=function(e){var t=egret.getTimer()-this._curTime,n=this._serverTime+t/1e3,r=e-n;return 0>r&&(r=0),r},e.isDebug=!0,e}();__reflect(GM.prototype,"GM");var HttpServer=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.prototype.sendHttpMsg=function(e,t,n){var r=GM.jm.getClass("DicServerInfo"),i=r.serverUrl+e;this.SendUrlHttpMsg(i,t,n)},t.prototype.sendHttpMsgWithType=function(e,t,n,r,i){var o=GM.jm.getClass("DicServerInfo"),a=o.serverUrl+e;this.SendUrlHttpMsg(a,t,n,r,i)},t}(HttpConnect);__reflect(HttpServer.prototype,"HttpServer");var MessageManager=function(e){function t(){var n=e.call(this)||this;if(t.instance)throw new Error("GameSocket instance has already been constructed!");return t.instance=null,n}return __extends(t,e),t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t}(TcpServer);__reflect(MessageManager.prototype,"MessageManager");var UIObject=function(e){function t(){var t=e.call(this)||this;return t.keyName="",t.data=null,t._closeHander=null,t
}return __extends(t,e),t.prototype.onCreate=function(){this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddStage,this),this.addEventListener(eui.UIEvent.CHANGE_END,this.onAddEnd,this)},t.prototype.onCreateChildren=function(){},t.prototype.onAddEnd=function(e){this.removeEventListener(eui.UIEvent.CHANGE_END,this.onAddEnd,this),this.onJoin()},t.prototype.onAddStage=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddStage,this),this.onAdd(),t.guid&&t.guid.execute(),CommunicationManager.getInstance().offlineRev||lcp.LListener.getInstance().dispatchEventWithType("tky_offlinepost")},t.prototype.onJoin=function(){},t.prototype.onAdd=function(){},t.prototype.onEnterFrame=function(e){},t.prototype.msgDo=function(e,t){},t.prototype.execMessage=function(e){},t.prototype.onDestroy=function(){},t.prototype.onClose=function(e,t){void 0===t&&(t=null),this._closeHander&&this._closeHander.executeWith([e,t])},t.prototype.onDlgClose=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=0),this.onClose(e,t),GM.dlg.dlgClose(e,n)},t.prototype.onDlgOnlyClose=function(e,t){void 0===t&&(t=0),GM.dlg.dlgClose(e,t)},t}(eui.Component);__reflect(UIObject.prototype,"UIObject");var App=function(){function e(){}return Object.defineProperty(e,"TimerManager",{get:function(){return TimerManager.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DateUtils",{get:function(){return DateUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MathUtils",{get:function(){return MathUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RandomUtils",{get:function(){return RandomUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BitmapNumber",{get:function(){return BitmapNumber.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"StageUtils",{get:function(){return StageUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"StringUtils",{get:function(){return StringUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CommonUtils",{get:function(){return CommonUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DeviceUtils",{get:function(){return DeviceUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ShockUtils",{get:function(){return ShockUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TextFlowMaker",{get:function(){return TextFlowMaker.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ArrayUtils",{get:function(){return ArrayUtils.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ResourceUtils",{get:function(){return ResourceUtils.getInstance()},enumerable:!0,configurable:!0}),e.Init=function(){},e}();__reflect(App.prototype,"App");var ScreenMovies;!function(e){function t(e){function t(e){_++,_==a&&n.removeChild(o)}var n=GM.gamec.curStage(),r=GM.gamec.curWidth(),i=GM.gamec.curHeight(),o=new eui.Group;o.width=r,o.height=i,n.addChild(o);for(var a=40,s=5,c=a/s,h=0;a>h;h++){var l=r/s,u=i/c,p=h%s*l,g=Math.floor(h/s)*u,f=new egret.RenderTexture,d=(f.drawToTexture(n,new egret.Rectangle(p,g,l,u)),new egret.Bitmap);switch(d.texture=f,d.anchorOffsetX=l/2,d.anchorOffsetY=u/2,d.x=p+l/2,d.y=g+u/2,o.addChild(d),5==e&&(e=Math.ceil(4*Math.random())),e){case 1:var m=egret.Tween.get(d);m.to({scaleX:0,scaleY:0,alpha:0,rotation:359},800,egret.Ease.circIn).call(t,this);break;case 2:var y=-r;h%2||(y=2*r);var m=egret.Tween.get(d);m.to({x:y,alpha:0},800,egret.Ease.circIn).call(t,this);break;case 3:var m=egret.Tween.get(d);m.to({scaleX:.2,scaleY:1,alpha:0,blurFliter:0},800,egret.Ease.backInOut).call(t,this);break;case 4:var m=egret.Tween.get(d);m.to({alpha:0},900,egret.Ease.circIn).call(t,this);break;default:var m=egret.Tween.get(d);m.to({scaleX:1,scaleY:0,alpha:0},800,egret.Ease.circIn).call(t,this)}}var _=0}e.MovieStart=t}(ScreenMovies||(ScreenMovies={}));var ActMovie=function(){function e(){}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.prototype.getMovieClip=function(e,t){var n=e+"_json",r=RES.getRes(n),i=RES.getRes(e+"_png"),o=new egret.MovieClipDataFactory(r,i),a=new egret.MovieClip(o.generateMovieClipData(t));return a},e}();__reflect(ActMovie.prototype,"ActMovie");var ArrayUtils=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.forEach=function(e,t,n){for(var r=0,i=e.length;i>r;r++)t.apply(n,[e[r]])},t.prototype.addToltal=function(e){for(var t=e.length,n=0,r=0;t>r;r++)n+=Number(e[r]);return n},t.prototype.findMin=function(e){if(0===e.length)return 0;for(var t=Number(e[0]),n=e.length,r=0;n>r;r++){var i=Number(e[r]);t>i&&(t=i)}return t},t.prototype.findMax=function(e){for(var t=Number(e[0]),n=e.length,r=0;n>r;r++){var i=Number(e[r]);i>t&&(t=i)}return t},t.prototype.findForm=function(e,t){for(var n=e.length,r=0;n>r;r++)if(e[r]===t)return!0;return!1},t}(BaseClass);__reflect(ArrayUtils.prototype,"ArrayUtils");var AverageUtils=function(){function e(e){void 0===e&&(e=10),this.nums=[],this.numsLen=0,this.numSum=0,this.maxNum=e}return e.prototype.push=function(e){this.numsLen>this.maxNum&&(this.numsLen--,this.numSum-=this.nums.shift()),this.nums.push(e),this.numSum+=e,this.numsLen++},e.prototype.getValue=function(){return this.numSum/this.numsLen},e.prototype.clear=function(){this.nums.splice(0),this.numsLen=0,this.numSum=0},e}();__reflect(AverageUtils.prototype,"AverageUtils");var tiled;!function(e){var t=function(){function e(){}return Object.defineProperty(e,"nativeBase64",{get:function(){return"function"==typeof window.atob},enumerable:!0,configurable:!0}),e.decode=function(e){if(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),this.nativeBase64)return window.atob(e);for(var t=[],n=void 0,r=void 0,i=void 0,o=void 0,a=void 0,s=void 0,c=void 0,h=0;h<e.length;)o=this._keyStr.indexOf(e.charAt(h++)),a=this._keyStr.indexOf(e.charAt(h++)),s=this._keyStr.indexOf(e.charAt(h++)),c=this._keyStr.indexOf(e.charAt(h++)),n=o<<2|a>>4,r=(15&a)<<4|s>>2,i=(3&s)<<6|c,t.push(String.fromCharCode(n)),64!==s&&t.push(String.fromCharCode(r)),64!==c&&t.push(String.fromCharCode(i));return t=t.join("")},e.encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t,n,r,i,o,a,s,c=[],h=0;h<e.length;)t=e.charCodeAt(h++),n=e.charCodeAt(h++),r=e.charCodeAt(h++),i=t>>2,o=(3&t)<<4|n>>4,a=(15&n)<<2|r>>6,s=63&r,isNaN(n)?a=s=64:isNaN(r)&&(s=64),c.push(this._keyStr.charAt(i)),c.push(this._keyStr.charAt(o)),c.push(this._keyStr.charAt(a)),c.push(this._keyStr.charAt(s));return c=c.join(""),Log.trace("debug","返回= "+c),c},e.decodeBase64AsArray=function(t,n){n=n||1;var r,i,o,a=e.decode(t),s=new Uint32Array(a.length/n);for(r=0,o=a.length/n;o>r;r++)for(s[r]=0,i=n-1;i>=0;--i)s[r]+=a.charCodeAt(r*n+i)<<(i<<3);return s},e.decompress=function(e,t,n){throw new Error("GZIP/ZLIB compressed TMX Tile Map not supported!")},e.decodeCSV=function(e){for(var t=e.replace("\n","").trim().split(","),n=[],r=0;r<t.length;r++)n.push(+t[r]);return n},e._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e}();e.Base64=t,__reflect(t.prototype,"tiled.Base64")}(tiled||(tiled={}));var UIPool=function(){function e(){this._pool=new HashMap,egret.Ticker.getInstance().register(this.onEnterFrame,this)}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.msgDO=function(e,t){for(var n=this._pool.values(),r=0,i=n.length;i>r;r++){var o=n[r];o.parent&&o.msgDo(e,t)}},e.prototype.execMessage=function(e){for(var t=this._pool.values(),n=0,r=t.length;r>n;n++){var i=t[n];i.parent&&i.execMessage(e)}},e.prototype.createObject=function(e){var t,n=e.key;return t=this._pool.getValue(n),t||(t=new e,this._pool.put(n,t),t.onCreateChildren()),t.keyName=n,t.onCreate(),t},e.prototype.getObject=function(e){return this._pool.getValue(e)},e.prototype.destroyObject=function(e){e.onDestroy()},e.prototype.onEnterFrame=function(e){for(var t=this._pool.values(),n=0,r=t.length;r>n;n++){var i=t[n];i.parent||i.onEnterFrame(e)}},e}();__reflect(UIPool.prototype,"UIPool");var BitmapNumber=function(e){function t(){var t=e.call(this)||this;return t._imgPool=[],t._containerPool=[],t}return __extends(t,e),t.prototype.createNumPic=function(e,t,n){void 0===n&&(n=!1);var r,i=this.getContainer(),o=e.toString(),a=0;if(n)r=this.getSingleNumPic(o,t),i.addChild(r);else for(a;a<o.length;a++)r=this.getSingleNumPic(o.charAt(a),t),i.addChild(r);return this.repositionNumPic(i),i},t.prototype.desstroyNumPic=function(e){this.clearContainer(e),e.parent&&e.parent.removeChild(e)},t.prototype.changeNum=function(e,t,n){var r=t.toString();if(e.numChildren>r.length)for(;e.numChildren>r.length;)this.recycleBM(e.getChildAt(e.numChildren-1));var i,o=0;for(o;o<r.length;o++)o>=e.numChildren&&e.addChild(this.getBitmap()),i=r.charAt(o),i="."===i?"dot":i,e.getChildAt(o).texture=this.getTexture(i,n);this.repositionNumPic(e)},t.prototype.repositionNumPic=function(e){var t,n=0,r=0;for(n;n<e.numChildren;n++)t=e.getChildAt(n),t.x=r,r=t.x+t.width-10},t.prototype.clearContainer=function(e){for(;e.numChildren;)this.recycleBM(e.removeChildAt(0))},t.prototype.recycleBM=function(e){e&&e.parent&&(e.parent.removeChild(e),e.texture=null,this._imgPool.push(e))},t.prototype.getContainer=function(){return this._containerPool.length?this._containerPool.shift():new egret.DisplayObjectContainer},t.prototype.getSingleNumPic=function(e,t){"."===e&&(e="dot");var n=this.getBitmap();return n.texture=this.getTexture(e,t),n},t.prototype.getTexture=function(e,t){return RES.getRes(t+"_"+e+"_png")},t.prototype.getBitmap=function(){return this._imgPool.length?this._imgPool.shift():new egret.Bitmap},t}(BaseClass);__reflect(BitmapNumber.prototype,"BitmapNumber");var CommonUtils=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.addLableStrokeColor=function(e,t,n){var r=e;r.strokeColor=t,r.stroke=n},t.copyDataHandler=function(e){var t;if(e instanceof Array)t=[];else{if(!(e instanceof Object))return e;t={}}for(var n=Object.keys(e),r=0,i=n.length;i>r;r++){var o=n[r];t[o]=this.copyDataHandler(e[o])}return t},t.lock=function(){App.StageUtils.getStage().touchEnabled=App.StageUtils.getStage().touchChildren=!1},t.unlock=function(){App.StageUtils.getStage().touchEnabled=App.StageUtils.getStage().touchChildren=!0},t.int64ToNumber=function(e){return parseInt(e.toString())},t.labelIsOverLenght=function(e,t){var n=null;n=1e5>t?t:1e6>t?Math.floor(t/1e3/10).toString()+"万":Math.floor(t/1e4).toString()+"万",e.text=n},t}(BaseClass);__reflect(CommonUtils.prototype,"CommonUtils");var DateUtils=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.compareDay=function(e){var t=new Date,n=this.getDate(e),r=t.getTime()-n.getTime();return r>0?!0:!1},t.prototype.compareMatch=function(e,t){var n=new Date,r=this.getDate(e),i=n.getTime()-r.getTime();return i>0?i>60*t*60*1e3?2:1:0},t.prototype.getDate=function(e){var t=e.split(" "),n=t[0],r=n.split("-"),i=t[1],o=i.split(":"),a=new Date(Number(r[0]),Number(r[1])-1,Number(r[2]),Number(o[0]),Number(o[1]));return a},t.prototype.getXiaoTime=function(e){var t=e.split(" ");return t[1]},t.prototype.getFormatBySecond=function(e,t){void 0===t&&(t=1);var n="";switch(t){case 1:n=this.getFormatBySecond1(e);break;case 2:n=this.getFormatBySecond2(e);break;case 3:n=this.getFormatBySecond3(e);break;case 4:n=this.getFormatBySecond4(e);break;case 5:n=this.getFormatBySecond5(e);break;case 6:n=this.getFormatBySecond6(e);break;case 7:n=this.getFormatBySecond7(e);break;case 8:n=this.getFormatBySecond8(e)}return n},t.prototype.formatDate=function(e){var t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate();return t+"-"+n+"-"+r},t.prototype.isLeapYear=function(e){return e%4===0&&(e%100!==0||e%400===0)},t.prototype.getFormatBySecond1=function(e){void 0===e&&(e=0);var t,n=Math.floor(e/3600);t=0===n?"00":10>n?"0"+n:""+n;var r,i,o=Math.floor((e-3600*n)/60),a=Math.floor((e-3600*n)%60);return r=0===o?"00":10>o?"0"+o:""+o,i=0===a?"00":10>a?"0"+a:""+a,t+":"+r+":"+i},t.prototype.getFormatBySecond3=function(e){void 0===e&&(e=0);var t,n,r=Math.floor(e/3600),i=Math.floor((e-3600*r)/60),o=Math.floor((e-3600*r)%60);return t=0===i?"00":10>i?"0"+i:""+i,n=0===o?"00":10>o?"0"+o:""+o,t+":"+n},t.prototype.getFormatBySecond2=function(e){var t=new Date(e),n=t.getFullYear(),r=t.getMonth()+1,i=t.getDate(),o=t.getHours(),a=t.getMinutes(),s=t.getSeconds();return n+"-"+r+"-"+i+" "+o+":"+a+":"+s},t.prototype.getFormatBySecond4=function(e){var t=Math.floor(e/3600);return t>0?t>24?Math.floor(t/24)+"天前":t+"小时前":Math.floor(e/60)+"分钟前"},t.prototype.getFormatBySecond5=function(e){var t=86400,n=3600,r=60,i=Math.floor(e/t),o=Math.floor(e%t/n),a=Math.floor((e-o*n)/r),s=Math.floor((e-o*n)%r),c="",h="",l="",u="";return e>0?0===i?0===o?0===a?u=0===s?"":10>s?"0"+s+"秒":""+s+"秒":(l=""+a+"分",u=0===s?"":10>s?"0"+s+"秒":""+s+"秒",l+u):(h=o+"小时",0===a?u=0===s?"":10>s?"0"+s+"秒":""+s+"秒":(l=10>a?"0"+a+"分":""+a+"分",h+l)):(c=i+"天",h=0===o?"":10>o?"0"+o+"小时":""+o+"小时",c+h):""},t.prototype.getFormatBySecond6=function(e){var t=86400,n=3600,r=60,i=Math.floor(e/t),o=Math.floor(e%t/n),a=Math.floor((e-i*t-o*n)/r),s=Math.floor((e-i*t-o*n)%r),c=!1,h="";return i>0&&(h+=i+"天",c=!0),(c||o>0)&&(h+=o+"小时",c=!0),(c||a>0)&&(h+=a+"分",c=!0),(c||s)&&(h+=s+"秒"),h},t.prototype.getFormatBySecond7=function(e){var t=new Date(e),n=t.getFullYear(),r=t.getMonth()+1,i=t.getDate();return n+"年"+r+"月"+i+"日"},t.prototype.getFormatBySecond8=function(e){var t=86400,n=Math.floor(e/t),r="";return r=n>0?n+1+"天":"1天"},t}(BaseClass);__reflect(DateUtils.prototype,"DateUtils");var DeviceUtils=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t.prototype,"IsHtml5",{get:function(){return egret.Capabilities.runtimeType===egret.RuntimeType.WEB},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsNative",{get:function(){return egret.Capabilities.runtimeType===egret.RuntimeType.NATIVE},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsMobile",{get:function(){return egret.Capabilities.isMobile},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsPC",{get:function(){return egret.Capabilities.isMobile},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsQQBrowser",{get:function(){return this.IsHtml5&&-1!==navigator.userAgent.indexOf("MQQBrowser")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsIEBrowser",{get:function(){return this.IsHtml5&&-1!==navigator.userAgent.indexOf("MSIE")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsFirefoxBrowser",{get:function(){return this.IsHtml5&&-1!==navigator.userAgent.indexOf("Firefox")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsChromeBrowser",{get:function(){return this.IsHtml5&&-1!==navigator.userAgent.indexOf("Chrome")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsSafariBrowser",{get:function(){return this.IsHtml5&&-1!==navigator.userAgent.indexOf("Safari")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsOperaBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Opera")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isIPhoneX",{get:function(){var e=navigator.userAgent,t=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return t?812==screen.height&&375==screen.width?!0:!1:void 0},enumerable:!0,configurable:!0}),t}(BaseClass);__reflect(DeviceUtils.prototype,"DeviceUtils");var DragonBoneManager=function(){function e(){this._hash=new HashMap}return e.prototype.getDBArmature=function(e,t){this.makeDragonData(e);var n=dragonBones.EgretFactory.factory;"suiphd"==e?e+="_ske":"ssxg"==e?e+="_ske_2":"ksxg1"==e&&(e="ksxg_ske");var r=n.buildArmature(t,e);r.getDisplay();return dragonBones.WorldClock.clock.add(r),r},e.prototype.makeDragonData=function(e){if(!this._hash.containsKey(e)){var t=RES.getRes(e+"_ske_json"),n=RES.getRes(e+"_tex_json"),r=RES.getRes(e+"_tex_png"),i=dragonBones.EgretFactory.factory;i.parseDragonBonesData(t),i.parseTextureAtlasData(n,r),this._hash.put(e,1)}},e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e}();__reflect(DragonBoneManager.prototype,"DragonBoneManager");var LocationProperty=function(){function e(){}return e.getPara=function(e,t){if(egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE)return null;var n=t||location.href;if(-1!=n.indexOf("?")){var r="&"+n.split("?")[1],i=new RegExp("&"+e+"=.*?(?:&|$)"),o=i.exec(r);if(o){var a=o[0];return a.split("&")[1].split("=")[1]}}return null},e.setProperty=function(e,t,n){var r=n||location.href;"&"+r.split("?")[1];if(-1==r.indexOf("?"))return r+="?"+e+"="+t;var i=r.split("?")[1];if(""==i)return r+=e+"="+t;var o=new RegExp("(?:^|&)"+e+"=.*?(?:&|$)"),a=o.exec(i);if(a&&""!=a[0]){var s=a[0],c=new RegExp("=.*$"),h=s.replace(c,"="+t);return r.replace(s,h)}return r+="&"+e+"="+t},e.hasProperty=function(e,t){var n=t||location.href,r="&"+n.split("?")[1];return-1!=r.indexOf("&"+e+"=")},e}();__reflect(LocationProperty.prototype,"LocationProperty");var MathUtils=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getAngle=function(e){return 180*e/Math.PI},t.prototype.getRadian2=function(e,t,n,r){var i=n-e,o=r-t;return Math.atan2(o,i)},t.prototype.getDistance=function(e,t,n,r){var i=n-e,o=r-t,a=i*i+o*o;return Math.sqrt(a)},t.prototype.Combination=function(e,t,n,r){for(var i=new Array,o=0;e>o;++o)if(i[0]=o,!this.doCombination(e,t,o,1,i,n))return void r.execute();r.execute()},t.prototype.doCombination=function(e,t,n,r,i,o){if(r==t)return o.executeWith([i,r]),!0;for(var a=++n;e>a;++a)if(i[r]=a,!this.doCombination(e,t,a,r+1,i,o))return!1;return!0},t.prototype.cartesian=function(e,t,n){var r=new Array(e.length);this.doCartesian(e,0,r,t),n.execute()},t.prototype.doCartesian=function(e,t,n,r){for(var i=0;i<e[t];++i)if(n[t]=i,t==e.length-1)r.executeWith([n,n.length]);else if(!this.doCartesian(e,t+1,n,r))return!1;return!0},t.prototype.getNumberDigit=function(e){for(var t=1,n=Math.floor(e/10);n>0;)t++,n=Math.floor(n/10);return t},t.prototype.calNumberJieCheng=function(e){if(1>e)return 0;for(var t=1,n=1;e>=n;n++)t=Math.floor(t*n);return t},t}(BaseClass);__reflect(MathUtils.prototype,"MathUtils");var ObjectPool=function(){function e(){this._objs=new Array}return e.pop=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e._content[t]||(e._content[t]=[]);var i=e._content[t];if(i.length)return i.pop();var o=egret.getDefinitionByName(t),a=n.length,s=void 0;return 0==a?s=new o:1==a?s=new o(n[0]):2==a?s=new o(n[0],n[1]):3==a?s=new o(n[0],n[1],n[2]):4==a?s=new o(n[0],n[1],n[2],n[3]):5==a&&(s=new o(n[0],n[1],n[2],n[3],n[4])),s.ObjectPoolKey=t,s},e.popWithExtraKey=function(t,n){e._content[t]||(e._content[t]=[]);var r,i=e._content[t];if(i.length)for(var o=0;o<i.length;o++)if(i[o].extraKey==n){r=i[o],i.splice(o,1);break}if(!r){var a=egret.getDefinitionByName(t);r=new a(n),r.extraKey=n,r.ObjectPoolKey=t}return r},e.push=function(t){if(null==t)return!1;var n=t.ObjectPoolKey;return e._content[n]?(e._content[n].push(t),!0):!1},e.clear=function(){e._content={}},e.clearClass=function(t,n){void 0===n&&(n=null);for(var r=e._content[t];r&&r.length;){var i=r.pop();n&&i[n](),i=null}e._content[t]=null,delete e._content[t]},e.dealFunc=function(t,n){var r=e._content[t];if(null!=r){var i=0,o=r.length;for(i;o>i;i++)r[i][n]()}},e.prototype.pushObj=function(e){this._objs.push(e)},e.prototype.popObj=function(){return this._objs.length>0?this._objs.pop():null},e.prototype.clear=function(){for(;this._objs.length>0;)this._objs.pop()},e._content={},e}();__reflect(ObjectPool.prototype,"ObjectPool");var RandomUtils=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.limit=function(e,t){e=Math.min(e,t),t=Math.max(e,t);var n=t-e;return e+Math.random()*n},t.prototype.limitInteger=function(e,t){return Math.round(this.limit(e,t))},t.prototype.randPercent=function(e){var t=this.limitInteger(1,100);return e>=t?!0:!1},t.prototype.rand10000=function(e){var t=this.limitInteger(1,1e4);return e>=t?!0:!1},t.prototype.rand1000=function(e){var t=this.limitInteger(1,1e3);return e>=t?!0:!1},t.prototype.randomArray=function(e){var t=Math.floor(Math.random()*e.length);return e[t]},t.prototype.randomFrom=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},t}(BaseClass);__reflect(RandomUtils.prototype,"RandomUtils");var EuiObject=function(e){function t(){var t=e.call(this)||this;return t._hander=null,t._data=null,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.removeStage,t),t}return __extends(t,e),t.prototype.addHander=function(e){this._hander=e},t.prototype.onAddStage=function(e){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddStage,this),this.onAdd()},t.prototype.onAdd=function(){},t.prototype.removeStage=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onAddStage,this),this._hander=null,this.onDestroy()},t.prototype.onDestroy=function(){},t.prototype.updataShow=function(){},t.prototype.msgDo=function(e,t){},t}(eui.Component);__reflect(EuiObject.prototype,"EuiObject");var ShockUtils=function(e){function t(){var t=e.call(this)||this;return t.MAP=0,t.SPRITE=1,t.mapPoss=[new egret.Point(0,3),new egret.Point(0,0),new egret.Point(0,-2)],t.spritePoss=[new egret.Point(5,0),new egret.Point(-5,0),new egret.Point(5,0)],t._shockLength=0,t._shockCount=0,t._rx=0,t._ry=0,t._type=0,t._repeatCount=0,t}return __extends(t,e),t.prototype.destroy=function(){this.stop()},t.prototype.shock=function(e,t,n){void 0===e&&(e=0),void 0===t&&(t=null),void 0===n&&(n=3),this._target||(this._type=e,this._target=t,this._type==this.MAP?(this._shockPoss=this.mapPoss.concat(),this._shockLength=this._shockPoss.length):this._type==this.SPRITE&&(this._shockPoss=this.spritePoss.concat(),this._shockLength=this._shockPoss.length),this.start(n))},t.prototype.start=function(e){void 0===e&&(e=1),this.repeatCount=e,this._shockCount=0,this._target&&(this._type!=this.MAP&&(this._rx=this._target.x),this._ry=this._target.y,App.TimerManager.doFrame(1,0,this.onShockEnter,this))},t.prototype.stop=function(){this._target&&(this._type!=this.MAP&&(this._target.x=this._rx),this._target.y=this._ry,App.TimerManager.remove(this.onShockEnter,this)),this._target=null},t.prototype.onShockEnter=function(e){var t=this._shockLength*this._repeatCount;if(this._shockCount>=t)return void this.stop();var n=this._shockCount%this._shockLength,r=this._shockPoss[n];this._target&&(this._type!=this.MAP&&(this._target.x=this._rx+r.x),this._target.y=this._ry+r.y),this._shockCount++},Object.defineProperty(t.prototype,"repeatCount",{get:function(){return this._repeatCount},set:function(e){this._repeatCount=e},enumerable:!0,configurable:!0}),t}(BaseClass);__reflect(ShockUtils.prototype,"ShockUtils");var StageUtils=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.getHeight=function(){return this.getStage().stageHeight},t.prototype.getWidth=function(){return this.getStage().stageWidth},t.prototype.setTouchChildren=function(e){this.getStage().touchChildren=e},t.prototype.setTouchEnabled=function(e){this.getStage().touchEnabled=e},t.prototype.setMaxTouches=function(e){this.getStage().maxTouches=e},t.prototype.setFrameRate=function(e){this.getStage().frameRate=e},t.prototype.getStage=function(){return null},t}(BaseClass);__reflect(StageUtils.prototype,"StageUtils");var StringUtils=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.trimSpace=function(e){return e.replace(/^\s*(.*?)[\s\n]*$/g,"$1")},t.prototype.getStringLength=function(e){for(var t=e.split(""),n=0,r=0,i=t;r<i.length;r++){var o=i[r];n+=this.isChinese(o)?2:1}return n},t.prototype.isChinese=function(e){var t=/^[u4E00-u9FA5]+$/;return t.test(e)?!1:!0},t.prototype.makeStrToNumer=function(e){if(e.length<2)return 0;var t=e.charAt(e.length-2),n=e.charAt(e.length-1),r=Number(t),i=Number(n);return 10*r+i},t}(BaseClass);__reflect(StringUtils.prototype,"StringUtils");var TextFlowMaker=function(e){function t(){var t=e.call(this)||this;return t.STYLE_COLOR="C",t.STYLE_SIZE="S",t.PROP_TEXT="T",t}return __extends(t,e),t.prototype.generateTextFlow=function(e){for(var t=e.split("|"),n=[],r=0,i=t.length;i>r;r++)n.push(this.getSingleTextFlow(t[r]));return n},t.prototype.getSingleTextFlow=function(e){for(var t,n=e.split("&"),r={style:{}},i=0,o=n.length;o>i;i++)t=n[i].split(":"),t[0]==this.PROP_TEXT?r.text=t[1]:t[0]==this.STYLE_SIZE?r.style.size=parseInt(t[1]):t[0]==this.STYLE_COLOR?r.style.textColor=parseInt(t[1]):r.text=t[0];return r},t}(BaseClass);__reflect(TextFlowMaker.prototype,"TextFlowMaker");var TimerHandler=function(){function e(){this.delay=0,this.repeatCount=0,this.exeTime=0,this.dealTime=0}return e.prototype.clear=function(){this.method=null,this.methodObj=null,this.complateMethod=null,this.complateMethodObj=null},e}();__reflect(TimerHandler.prototype,"TimerHandler"),window.TimerHandler=TimerHandler;var TimerManager=function(e){function t(){var t=e.call(this)||this;return t._handlers=new Array,t._delHandlers=new Array,t._currTime=egret.getTimer(),t._currFrame=0,t._count=0,t._timeScale=1,t}return __extends(t,e),t.prototype.setTimeScale=function(e){this._timeScale=e},t.prototype.doTimer=function(e,t,n,r,i,o){void 0===i&&(i=null),void 0===o&&(o=null),this.create(!1,e,t,n,r,i,o)},t.prototype.doFrame=function(e,t,n,r,i,o){void 0===i&&(i=null),void 0===o&&(o=null),this.create(!0,e,t,n,r,i,o)},Object.defineProperty(t.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),t.prototype.remove=function(e,t){for(var n=0;n<this._count;n++){var r=this._handlers[n];if(r.method==e&&r.methodObj==t){this._handlers.splice(n,1),ObjectPool.push(r),this._count--;break}}},t.prototype.removeAll=function(e){for(var t=0;t<this._count;t++){var n=this._handlers[t];n.methodObj==e&&(this._handlers.splice(t,1),ObjectPool.push(n),this._count--,t--)}},t.prototype.isExists=function(e,t){for(var n=0;n<this._count;n++){var r=this._handlers[n];if(r.method==e&&r.methodObj==t)return!0}return!1},t.prototype.onEnterFrame=function(){this._currFrame++,this._currTime=egret.getTimer();for(var e=0;e<this._count;e++){var t=this._handlers[e],n=t.userFrame?this._currFrame:this._currTime;n>=t.exeTime&&(t.method.call(t.methodObj,(this._currTime-t.dealTime)*this._timeScale),t.dealTime=this._currTime,t.exeTime+=t.delay,t.repeat||(t.repeatCount>1?t.repeatCount--:(t.complateMethod&&t.complateMethod.apply(t.complateMethodObj),this._delHandlers.push(t))))}for(;this._delHandlers.length;){var t=this._delHandlers.pop();this.remove(t.method,t.methodObj)}},t.prototype.create=function(e,t,n,r,i,o,a){if(!(0>t||0>n||null==r)){this.remove(r,i);var s=ObjectPool.pop("TimerHandler");s.userFrame=e,s.repeat=0==n,s.repeatCount=n,s.delay=t,s.method=r,s.methodObj=i,s.complateMethod=o,s.complateMethodObj=a,s.exeTime=t+(e?this._currFrame:this._currTime),s.dealTime=this._currTime,this._handlers.push(s),this._count++}},t}(BaseClass);__reflect(TimerManager.prototype,"TimerManager");var BaseDefines=function(){function e(){}return e.TKCLOUD_TYPE={TO_PAGE:"tky_topage"},e.VIEW_TYPE={SHOW_WAIT:"show_wait",HIDE_WAIT:"hide_wait"},e.FrameworkVersion=17,e}();__reflect(BaseDefines.prototype,"BaseDefines");var SoundBg=function(e){function t(){var t=e.call(this)||this;return t._currBg="",t._soundLength=0,t._soundFlag=0,t._soundTimer=null,t}return __extends(t,e),t.prototype.stop=function(){this._currSoundChannel&&this._currSoundChannel.stop(),this._currSoundChannel=null,this._currSound=null,this._currBg="",this._soundTimer&&this._soundTimer.stop()},t.prototype.play=function(e,t,n,r){if(void 0===r&&(r=null),this._volume=t,this._currBg!=e){this.stop(),this._currBg=e,this._loops=n,this._endHandler=r,this._soundTimer=new egret.Timer(1e3,0),this._soundTimer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),Log.trace("debug","effectName:"+e);var i=this.getSound(e);i&&this.playSound(i,n,r)}},t.prototype.continuePlay=function(){if(this._currSoundChannel){var e=this._currSoundChannel.volume,t=this._currSoundChannel.position;this._currSoundChannel.stop(),this._currSoundChannel=this._currSound.play(t,0),this._currSoundChannel.volume=e}},t.prototype.setVolume=function(e){this._volume=e,this._currSoundChannel&&(this._currSoundChannel.volume=this._volume)},t.prototype.loadedPlay=function(e){this._currBg==e&&this.playSound(RES.getRes(e),this._loops,this._endHandler)},t.prototype.checkCanClear=function(e){return this._currBg!=e},t.prototype.timerFunc=function(){this._soundFlag++,this._soundFlag>=this._soundLength&&(this._soundTimer.stop(),this._endHandler&&this._endHandler.execute())},t.prototype.playSound=function(e,t,n){e&&(this._currSound=e,this._currSoundChannel=this._currSound.play(0,t),this._currSoundChannel.volume=this._volume,this._soundLength=Math.round(this._currSound.length),this._soundFlag=0,this._soundTimer.start())},t}(BaseSound);__reflect(SoundBg.prototype,"SoundBg");var SoundEffects=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.play=function(e,t){void 0===t&&(t=.5),this._volume=t;var n=this.getSound(e);n&&this.playSound(n)},t.prototype.setVolume=function(e){this._volume=e},t.prototype.loadedPlay=function(e){this.playSound(RES.getRes(e))},t.prototype.stop=function(){this._currSoundChannel&&this._currSoundChannel.stop(),this._currSoundChannel=null},t.prototype.playSound=function(e){e&&(this._currSoundChannel=e.play(0,1),this._currSoundChannel.volume=this._volume)},t}(BaseSound);__reflect(SoundEffects.prototype,"SoundEffects");var AnchorUtil=function(){function e(){}return e.init=function(){this._isInited||(this._propertyChange=Object.create(null),this._anchorChange=Object.create(null),this.injectAnchor(),this._isInited=!0)},e.setAnchorX=function(e,t){e.anchorX=t},e.setAnchorY=function(e,t){e.anchorY=t},e.setAnchor=function(e,t){e.anchorX=e.anchorY=t},e.getAnchorX=function(e){return e.anchorX||0},e.getAnchorY=function(e){return e.anchorY||0},e.injectAnchor=function(){Object.defineProperty(egret.DisplayObject.prototype,"width",{get:function(){return this.$getWidth()},set:function(t){var n=this;this.$setWidth(t),e._propertyChange[this.hashCode]=!0,egret.callLater(function(){e.changeAnchor(n)},this)},enumerable:!0,configurable:!0}),Object.defineProperty(egret.DisplayObject.prototype,"height",{get:function(){return this.$getHeight()},set:function(t){var n=this;this.$setHeight(t),e._propertyChange[this.hashCode]=!0,egret.callLater(function(){e.changeAnchor(n)},this)},enumerable:!0,configurable:!0}),Object.defineProperty(egret.DisplayObject.prototype,"anchorX",{get:function(){return this._anchorX},set:function(t){var n=this;this._anchorX=t,e._propertyChange[this.hashCode]=!0,e._anchorChange[this.hashCode]=!0,egret.callLater(function(){e.changeAnchor(n)},this)},enumerable:!0,configurable:!0}),Object.defineProperty(egret.DisplayObject.prototype,"anchorY",{get:function(){return this._anchorY},set:function(t){var n=this;this._anchorY=t,e._propertyChange[this.hashCode]=!0,e._anchorChange[this.hashCode]=!0,egret.callLater(function(){e.changeAnchor(n)},this)},enumerable:!0,configurable:!0}),Object.defineProperty(egret.DisplayObject.prototype,"anchor",{get:function(){return this._anchorX},set:function(t){var n=this;this._anchorX=t,this._anchorY=t,e._propertyChange[this.hashCode]=!0,e._anchorChange[this.hashCode]=!0,egret.callLater(function(){e.changeAnchor(n)},this)},enumerable:!0,configurable:!0}),eui&&eui.Component&&(Object.defineProperty(eui.Component.prototype,"width",{get:function(){return this._UIC_Props_._uiWidth},set:function(t){var n=this;this.$setWidth(t),e._propertyChange[this.hashCode]=!0,egret.callLater(function(){e.changeAnchor(n)},this)},enumerable:!0,configurable:!0}),Object.defineProperty(eui.Component.prototype,"height",{get:function(){return this._UIC_Props_._uiHeight
},set:function(t){var n=this;this.$setHeight(t),e._propertyChange[this.hashCode]=!0,egret.callLater(function(){e.changeAnchor(n)},this)},enumerable:!0,configurable:!0}),eui.Component.prototype.setMeasuredSize=function(t,n){var r=this,i=!1;this._UIC_Props_._uiWidth!=t&&(this._UIC_Props_._uiWidth=t,i=!0),this._UIC_Props_._uiHeight!=n&&(this._UIC_Props_._uiHeight=n,i=!0),i&&(this.invalidateDisplayList(),this.dispatchResizeEvent(),e._propertyChange[this.hashCode]=!0,egret.callLater(function(){e.changeAnchor(r)},this))})},e.changeAnchor=function(t){e._propertyChange[t.hashCode]&&e._anchorChange[t.hashCode]&&(t.anchorOffsetX=t._anchorX*t.width,t.anchorOffsetY=t._anchorY*t.height,delete e._propertyChange[t.hashCode])},e}();__reflect(AnchorUtil.prototype,"AnchorUtil");var Base64;!function(e){function t(e){var t,n,r,i,o,a,s,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=function(e){for(var t="",n=0,r=0,i=0;n<e.length;)if(r=e.charCodeAt(n),128>r)t+=String.fromCharCode(r),n++;else if(r>191&&224>r)i=e.charCodeAt(n+1),t+=String.fromCharCode((31&r)<<6|63&i),n+=2;else{i=e.charCodeAt(n+1);var o=e.charCodeAt(n+2);t+=String.fromCharCode((15&r)<<12|(63&i)<<6|63&o),n+=3}return t},l="",u=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)i=c.indexOf(e.charAt(u++)),o=c.indexOf(e.charAt(u++)),a=c.indexOf(e.charAt(u++)),s=c.indexOf(e.charAt(u++)),t=i<<2|o>>4,n=(15&o)<<4|a>>2,r=(3&a)<<6|s,l+=String.fromCharCode(t),64!=a&&(l+=String.fromCharCode(n)),64!=s&&(l+=String.fromCharCode(r));return l=h(l)}function n(e){var t,n,r,i,o,a,s,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);128>r?t+=String.fromCharCode(r):r>127&&2048>r?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t},l="",u=0;for(e=h(e);u<e.length;)t=e.charCodeAt(u++),n=e.charCodeAt(u++),r=e.charCodeAt(u++),i=t>>2,o=(3&t)<<4|n>>4,a=(15&n)<<2|r>>6,s=63&r,isNaN(n)?a=s=64:isNaN(r)&&(s=64),l=l+c.charAt(i)+c.charAt(o)+c.charAt(a)+c.charAt(s);return l}e.base64_Decode=t,e.base64_Encode=n}(Base64||(Base64={}));var BaseDataEvent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(egret.Event);__reflect(BaseDataEvent.prototype,"BaseDataEvent");var BaseFunc=function(){function e(){}return e.objToClass=function(e,t){var n="";for(n in e)""!==n&&t.hasOwnProperty(n)&&("string"==typeof t[n]?t[n]=String(e[n]):"number"==typeof t[n]?t[n]=Number(e[n]):t[n]=e[n])},e.objToObj=function(e,t){var n="";for(n in e)t[n]=e[n]},e.ClassToClass=function(e,t){var n="";for(n in e)""!==n&&t.hasOwnProperty(n)&&("string"==typeof e[n]?t[n]=String(e[n]):"number"==typeof e[n]&&(t[n]=Number(e[n])))},e.strToObj=function(e,t,n){void 0===t&&(t=","),void 0===n&&(n=":");for(var r,i={},o=e.split(t),a=o.length,s=0;a>s;s++){var c=o[s];-1!==c.search(n)&&(r=c.split(n),r.length<2||(i[r[0]]=r[1]))}return i},e.randomInRange=function(e,t){var n=t-e;return Math.ceil(Math.random()*n+e)},e.FormatTimeMM=function(e){var t="",n=Math.floor(e/3600),r=Math.floor((e-3600*n)/60),i=Math.floor(e-60*r-3600*n);return e>0?(t=this.formatTimeString(n)+":",t+=this.formatTimeString(r)+":",t+=this.formatTimeString(i)):t="00:00:00",t},e.alignText=function(e,t){void 0===t&&(t=4),e.text.length>t?e.textAlign="left":e.textAlign="center"},e.formatTimeString=function(e){var t="";return t=10>e?"0"+String(e):String(e)},e.getHeroOcImg=function(e){var t="icon_job"+e+"_png";return t},e.formatDate=function(e,t){void 0===t&&(t=0);var n,r,i,o=new Date(1e3*parseInt(e)).toLocaleTimeString().replace("上午","").replace("下午","").replace(":","").replace(":",""),a=new Date(1e3*parseInt(e)).toLocaleTimeString().replace("上午","").replace("下午",""),s=new Date(1e3*parseInt(e)).toLocaleTimeString(),c=s.substr(0,1),h=o,l=o,u=o,p=new Date(1e3*parseInt(e)).toLocaleDateString().replace(/\//gi,"-");if("下"===c){for(var g=0;4>g;g++)h=h.substring(0,h.length-1);if(Number(h)>=1&&Number(h)<=9){l=l.substring(1);for(var f=0;3>f;f++)u=u.substring(1)}else{for(var d=0;2>d;d++)l=l.substring(1);for(var m=0;4>m;m++)u=u.substring(1)}for(var y=0;2>y;y++)l=l.substring(0,l.length-1);n=12===Number(h)?"12":12+Number(h)}else{for(var g=0;4>g;g++)h=h.substring(0,h.length-1);if(Number(h)>=0&&Number(h)<=9){l=l.substring(1);for(var f=0;3>f;f++)u=u.substring(1)}else{for(var d=0;2>d;d++)l=l.substring(1);for(var m=0;4>m;m++)u=u.substring(1)}for(var y=0;2>y;y++)l=l.substring(0,l.length-1);n=12===Number(h)?"00":Number(h)>=10&&Number(h)<=11?"0"+Number(h):Number(h)}return r=l,i=u,0===t&&(a=p+" "+n+":"+r+":"+i),1===t&&(a=p),a},e.timestampDate=function(){return Math.round((new Date).getTime()/1e3)},e.getqualitymark=function(e){var t="";switch(e){case 1:t="Ⅰ";break;case 2:t="Ⅱ";break;case 3:t="Ⅲ";break;case 4:t="Ⅳ";break;case 5:t="Ⅴ";break;case 6:t="Ⅵ"}return t},e.getqualitycolor=function(e){var t=0;switch(e){case 1:t=13500305;break;case 2:t=9500159;break;case 3:t=16748542;break;case 4:t=16751903}return t},e.getLang=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=e;if(t.length>0)for(var i=0,o=t.length;o>i;i++)r=r.replace("%"+(i+1),t[i]);return r},e.getLangNum=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=e;if(t.length>0)for(var i=0,o=t.length;o>i;i++)r=r.replace("#num"+(i+1)+"#",t[i]);return r=r.replace("#test#","")},e.getLangNumWithTest=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=t;if(n.length>0)for(var o=0,a=n.length;a>o;o++)i=i.replace("#num"+(o+1)+"#",n[o]);return i=i.replace("#test#",e)},e.GetDay=function(e){var t=new Date,n=t.getTime()-864e5*e,r=new Date;r.setTime(n);var i=r.getFullYear(),o=r.getDate(),a=r.getMonth()+1;Number(a)<10&&(a="0"+a),Number(o)<10&&(o="0"+o);var s=String(i)+String(a)+String(o);return s},e}();__reflect(BaseFunc.prototype,"BaseFunc");var BigMath=function(){function e(){}return e.toString=function(e){return new BigNum(e).toString()},e.add=function(e,t){var n=new BigNum(e),r=new BigNum(t),i=new BigNum(0),o=this.alignExp(n,r);return 0==o?(i._n=n._n+r._n,i._e=n._e,i.toString()):-1==o?r.toString():n.toString()},e.sub=function(e,t){var n=new BigNum(e),r=new BigNum(t),i=new BigNum(0),o=this.alignExp(n,r);return 0==o?(i._n=n._n-r._n,i._e=n._e,i.toString()):-1==o?(r._n=-r._n,r.toString()):n.toString()},e.mul=function(e,t){var n=new BigNum(e),r=new BigNum(t),i=new BigNum(0);return i._n=n._n*r._n,i._e=n._e+r._e,i.toString()},e.div=function(e,t){var n=new BigNum(e),r=new BigNum(t),i=new BigNum(0);return i._n=n._n/r._n,i._e=n._e-r._e,i.toString()},e.sqrt=function(e){var t=new BigNum(e);return t._n<0?"":(t._e%2==1&&(t._n*=10,t._e--),t._n=Math.sqrt(t._n),t._e=t._e/2,t.toString())},e.pow=function(e,t){if(0>t)return"";if(0==e)return new BigNum(0).toString();if(1==e)return new BigNum(1).toString();if(0==t)return new BigNum(1).toString();var n,r,i=new BigNum(e).toString(),o="1";for(n=2*t,r=2;Math.round(n)<1||Math.abs(Math.round(n)/r-t)>1e-5;)n*=2,r*=2;for(n=Math.round(n);0!=n;)n%2==1&&(o=this.mul(o,i)),n=Math.floor(n/2),i=this.mul(i,i);for(;r>1;)r/=2,o=this.sqrt(o);return o},e.greater=function(e,t){var n=new BigNum(e),r=new BigNum(t);if(n._n<0){if(r._n<0){if(n._e<r._e)return!0;if(n._e==r._e&&n._n<r._n)return!0}}else if(0==n._n){if(r._n<0)return!0}else if(n._n>0){if(r._n<=0)return!0;if(n._e>r._e)return!0;if(n._e==r._e&&n._n>r._n)return!0}return!1},e.greaterOrEqual=function(e,t){return 0==this.less(e,t)},e.less=function(e,t){var n=new BigNum(e),r=new BigNum(t);if(n._n<0){if(r._n>=0)return!0;if(n._e>r._e)return!0;if(n._e==r._e&&n._n>r._n)return!0}else if(0==n._n){if(r._n>0)return!0}else if(n._n>0&&r._n>0){if(n._e<r._e)return!0;if(n._e==r._e&&n._n<r._n)return!0}return!1},e.lessOrEqual=function(e,t){return 0==this.greater(e,t)},e.equal=function(e,t){var n=new BigNum(e),r=new BigNum(t);return n._e==r._e&&n._n==r._n?!0:!1},e.min=function(e,t){var n=new BigNum(e),r=new BigNum(t);return this.less(n,r)?n.toString():r.toString()},e.max=function(e,t){var n=new BigNum(e),r=new BigNum(t);return this.greater(n,r)?n.toString():r.toString()},e.clamp=function(e,t,n){var r=new BigNum(e),i=new BigNum(t),o=new BigNum(n);return this.min(this.max(r,i),o)},e.parseNumber=function(e){var t=new BigNum(e);return t._n*Math.pow(10,t._e)},e.floor=function(e){var t=new BigNum(e);if(t._e<0)return t._n=0,t._e=0,t.toString();if(t._e>200)return t.toString();for(;Math.floor(t._n)!=t._n&&t._e>0;)t._n*=10,t._e--;return t._n=Math.floor(t._n),t.format(),t.toString()},e.alignExp=function(e,t){var n=Math.abs(e._e-t._e);if(e._e<t._e){if(n>100)return-1;t._n*=Math.pow(10,n),t._e-=n}if(e._e>t._e){if(n>100)return 1;e._n*=Math.pow(10,n),e._e-=n}return 0},e}();__reflect(BigMath.prototype,"BigMath");var BigNum=function(){function e(e){this.setNum(e)}return e.prototype.setNum=function(t){if(this._n=0,this._e=0,"string"==typeof t){t=t.replace(/exp/g,"e");var n=String(t).split("e");1==n.length?(this._n=Number(n[0]),isNaN(this._n)&&(this._n=0)):n.length>=2&&(this._n=Number(n[0]),this._e=Number(n[1]),isNaN(this._n)&&(this._n=0),isNaN(this._e)&&(this._e=0))}else"number"==typeof t?this._n=t:t instanceof e&&(this._n=t._n,this._e=t._e);this.format()},e.prototype.format=function(){if(0==this._n)return void(this._e=0);var e=!1;if(this._n<0&&(this._n=-this._n,e=!0),this._n>=10){var t=Math.floor(this.log10(this._n));this._e+=t,this._n/=Math.pow(10,t)}if(this._n<1){var n=-Math.ceil(-this.log10(this._n));this._e+=n,this._n*=Math.pow(10,-n)}e&&(this._n=-this._n)},e.prototype.log10=function(e){return 0>e?void 0:Math.log(e)*Math.LOG10E},e.prototype.toString=function(){return this.format(),this._n+"e"+this._e},e}();__reflect(BigNum.prototype,"BigNum");var EffectFly;!function(e){function t(e){}e.showTips=t}(EffectFly||(EffectFly={}));var EffectUtils;!function(e){function t(e,t,n){switch(void 0===e&&(e=""),void 0===t&&(t=1),void 0===n&&(n=!1),t){case 1:TipsUtils.showTipsDownToUp(e,n);break;case 2:TipsUtils.showTipsLeftOrRight(e,n,!0);break;case 3:TipsUtils.showTipsLeftOrRight(e,n,!1);break;case 4:TipsUtils.showTipsFromCenter(e,n);break;case 5:TipsUtils.showTipsBigToSmall(e,n);break;case 6:TipsUtils.showTipsNotice(e,n)}}function n(e,t){void 0===t&&(t=1e3),new Blink(e,t)}function r(e,t){if(void 0===t&&(t=1e3),null==this.rotationArr&&(this.rotationArr=[]),!this.rotationArr[e.hashCode]){null!=this.rotationArr[e.hashCode]&&this.rotationArr[e.hashCode]||(this.rotationArr[e.hashCode]=!0);var n=function(){this.rotationArr[e.hashCode]&&null!=e&&(e.rotation=0,egret.Tween.get(e).to({rotation:360},t).call(n,this))};e.rotation=0,egret.Tween.get(e).to({rotation:360},t).call(n,this)}}function i(e){null==this.rotationArr&&(this.rotationArr=[]),this.rotationArr[e.hashCode]=!1}function o(e){var t=80,n=e.x;egret.Tween.get(e).to({x:e.x-10},t),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x+20},t)},this,2*t),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x-20},t)},this,3*t),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x+20},t)},this,4*t),egret.setTimeout(function(){egret.Tween.get(e).to({x:n},t)},this,5*t)}function a(e,t){void 0===t&&(t=1);var n=e,r=40,i=n.x,o=n.y;1==t?(egret.Tween.get(n).to({x:n.x-10},r),egret.setTimeout(function(){egret.Tween.get(n).to({x:n.x+20},r)},this,2*r),egret.setTimeout(function(){egret.Tween.get(n).to({x:n.x-20},r)},this,3*r),egret.setTimeout(function(){egret.Tween.get(n).to({x:n.x+20},r)},this,4*r),egret.setTimeout(function(){egret.Tween.get(n).to({x:i},r)},this,5*r)):(egret.Tween.get(n).to({x:n.x-10,y:n.y},r),egret.setTimeout(function(){egret.Tween.get(n).to({x:n.x+20,y:n.y},r)},this,2*r),egret.setTimeout(function(){egret.Tween.get(n).to({x:n.x,y:n.y+15},r)},this,3*r),egret.setTimeout(function(){egret.Tween.get(n).to({x:n.x,y:n.y-20},r)},this,4*r),egret.setTimeout(function(){egret.Tween.get(n).to({x:n.x,y:n.y+10},r)},this,5*r),egret.setTimeout(function(){egret.Tween.get(n).to({x:i,y:o},r)},this,6*r))}function s(e,t,n){void 0===n&&(n=50);var r=function(){if(null!=e){var i=function(){egret.Tween.get(e).to({y:e.y+n},t/3).call(r,this)};egret.Tween.get(e).to({y:e.y-n},t).call(i,this)}};r()}function c(e,t){if(void 0===t&&(t=1),!this.isPlayEffectPlay){this.isPlayEffectPlay=!0;var n=function(){this.isPlayEffectPlay=!1},r=function(){1==t?egret.Tween.get(e).to({scaleX:1,scaleY:1,x:e.x-e.width/4,y:e.y-e.height/4},500,egret.Ease.elasticOut).call(n,this):2==t?egret.Tween.get(e).to({scaleX:1,scaleY:1,x:e.x-e.width/4,y:e.y-e.height/4},500,egret.Ease.backOut).call(n,this):3==t&&egret.Tween.get(e).to({scaleX:1,scaleY:1,x:e.x-e.width/4,y:e.y-e.height/4},100).call(n,this)};egret.Tween.get(e).to({scaleX:.5,scaleY:.5,x:e.x+e.width/4,y:e.y+e.height/4},100,egret.Ease.sineIn).call(r,this)}}function h(e){egret.Tween.removeTweens(e);var t=function(){egret.Tween.get(e).to({scaleX:1,scaleY:1,x:162,y:55},800,egret.Ease.backOut)};egret.Tween.get(e).to({scaleX:1.5,scaleY:1.5,x:e.x-e.width/4,y:e.y-e.height/4},500,egret.Ease.sineIn).call(t,this)}function l(e){var t=function(){if(null!=e){var n=function(){e.scaleX=1,e.scaleY=1,egret.Tween.get(e).to({alpha:1},1e3).call(t,self)};e.alpha=1,egret.Tween.get(e).to({scaleX:1.5,scaleY:1.5,alpha:0},1e3).call(n,self)}};t()}function u(e,t){egret.Tween.removeTweens(e),null!=t&&GameLayerManager.gameLayer().effectLayer.removeChild(t)}e.showTips=t,e.blinkEffect=n;e.rotationEffect=r,e.removeRotationEffect=i,e.shakeObj=o,e.shakeScreen=a,e.flyObj=s;e.playEffect=c,e.playCenterScale=h,e.playScaleEffect=l,e.twComplete=u}(EffectUtils||(EffectUtils={}));var GameEffcet;!function(e){function t(e,t,n){var r=new eui.Image;r.source=e+"_png",r.x=t,r.y=n;var i=function(){GameLayerManager.gameLayer().effectLayer.contains(r)&&GameLayerManager.gameLayer().effectLayer.removeChild(r)};GameLayerManager.gameLayer().effectLayer.contains(r)||GameLayerManager.gameLayer().effectLayer.addChild(r),egret.Tween.get(r).wait(1500).to({alpha:1},100).call(i,this)}function n(e,t){void 0===t&&(t=200);var n=function(){egret.Tween.get(e).to({alpha:0},t).call(r,this)},r=function(){egret.Tween.get(e).to({alpha:1},1200).call(n,this)};n()}function r(e,t){void 0===t&&(t=300);var n=function(){egret.Tween.get(e).to({scaleX:1,scaleY:1},1200)},r=function(){egret.Tween.get(e).to({scaleX:1.5,scaleY:1.5},t).call(n,this)};r()}function i(e,t){void 0===t&&(t=1200);var n=e.y,r=function(){egret.Tween.get(e).to({y:n-10},t).call(i,this)},i=function(){egret.Tween.get(e).to({y:n},t).call(r,this)};r()}function o(e,t){void 0===t&&(t=1200);var n=e.y,r=function(){egret.Tween.get(e).to({y:n-10},t).call(i,this)},i=function(){egret.Tween.get(e).to({y:n},t).call(r,this)};r()}e.onlineShow=t,e.alphaChange=n,e.bigText=r,e.UpMove=i,e.upAndDowMove=o}(GameEffcet||(GameEffcet={}));var GameMusic=function(){function e(){}return Object.defineProperty(e,"soundVolume",{set:function(e){this.soundChannel&&(this.soundChannel.volume=+e)},enumerable:!0,configurable:!0}),e.play=function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=0),this.sound)this.soundPlaying||(this.soundChannel=this.sound.play(t,n),this.soundVolume=1,this.soundPlaying=!0);else if(RES.hasRes(e)){var r=this;RES.getResAsync(e,function(){r.sound=RES.getRes(e),r.play(e)},this)}},e.stop=function(){this.soundChannel&&this.soundChannel.stop(),this.sound=null,this.soundChannel=null,this.soundPlaying=!1},e.setVolume=function(e){this.soundChannel&&(this.soundChannel.volume=e)},e.soundPlaying=!1,e}();__reflect(GameMusic.prototype,"GameMusic");var Handler=function(){function e(e,t,n){void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=null),this.thisArg=e,this.method=t,this.args=n}return e.prototype.execute=function(){null!=this.method&&this.method.apply(this.thisArg,this.args)},e.prototype.executeWith=function(e){return null==e?this.execute():void(null!=this.method&&this.method.apply(this.thisArg,this.args?this.args.concat(e):e))},e}();__reflect(Handler.prototype,"Handler"),window.Handler=Handler;var HashMap=function(){function e(){this._keys=null,this.props=null,this.clear()}return e.prototype.clear=function(){this.props=new Object,this._keys=new Array},e.prototype.containsKey=function(e){return null!=this.props[e]},e.prototype.containsValue=function(e){var t=!1,n=this.size();if(n>0)for(var r=0;n>r;r++)if(this.props[this._keys[r]]==e){t=!0;break}return t},e.prototype.getValue=function(e){return this.props[e]},e.prototype.put=function(e,t){var n=null;return this.containsKey(e)?(n=this.getValue(e),this.props[e]=t):(this.props[e]=t,this._keys.push(e)),n},e.prototype.remove=function(e){var t=null;if(this.containsKey(e)){delete this.props[e];var n=this._keys.indexOf(e);n>-1&&this._keys.splice(n,1)}return t},e.prototype.putAll=function(e){this.clear();var t=e.size();if(t>0)for(var n=e.keys(),r=0;t>r;r++)this.put(n[r],e.getValue(n[r]))},e.prototype.size=function(){return this._keys.length},e.prototype.isEmpty=function(){return this.size()<1},e.prototype.values=function(){var e=new Array,t=this.size();if(t>0)for(var n=0;t>n;n++)e.push(this.props[this._keys[n]]);return e},e.prototype.keys=function(){return this._keys},e}();__reflect(HashMap.prototype,"HashMap");var HEvent=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.getInstance=function(){return t.init(),t.Instance},t.init=function(){null==t.Instance&&(t.Instance=new t)},t.Instance=null,t}(egret.EventDispatcher);__reflect(HEvent.prototype,"HEvent");var HLoad=function(e){function t(){var t=e.call(this)||this;return t.hander=null,t.time=0,t.isJson=!0,t}return __extends(t,e),t}(egret.HttpRequest);__reflect(HLoad.prototype,"HLoad");var lcp;!function(e){var t=function(e){function t(t,n,r,i){void 0===n&&(n=null),void 0===r&&(r=!1),void 0===i&&(i=!1);var o=e.call(this,t,r,i)||this;return o.CLASS_NAME="LEvent",n&&(o._obj=n),o}return __extends(t,e),t.prototype.clone=function(e){return new t(this.type,e?e:this._obj,this.bubbles,this.cancelable)},t.prototype.toString=function(){},Object.defineProperty(t.prototype,"param",{get:function(){return this._obj},enumerable:!0,configurable:!0}),t}(egret.Event);e.LEvent=t,__reflect(t.prototype,"lcp.LEvent")}(lcp||(lcp={}));var lcp;!function(e){var t=function(){function e(){this.CLASS_NAME="LListener",this.isInit=!1,this.isInit,null==this._dispatcher&&(this._dispatcher=new egret.EventDispatcher,this.isInit=!0)}return e.getInstance=function(){return null==this._instance&&(this._instance=new e),this._instance},e.prototype.addEventListener=function(e,t,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=0),this._dispatcher.addEventListener(e,t,n,r,i)},e.prototype.removeEventListener=function(e,t,n,r){void 0===r&&(r=!1),this._dispatcher.removeEventListener(e,t,n,r)},e.prototype.hasEventListener=function(e){return this._dispatcher.hasEventListener(e)},e.prototype.willTrigger=function(e){return this._dispatcher.willTrigger(e)},e.prototype.dispatchEvent=function(e){return this._dispatcher.dispatchEvent(e)},e.prototype.dispatchEventWithType=function(e,t,n,r){return this._dispatcher.dispatchEventWith(e,t,n,r)},e.prototype.toString=function(){return this._dispatcher.toString()},e}();e.LListener=t,__reflect(t.prototype,"lcp.LListener")}(lcp||(lcp={}));var LN=function(){function e(){this._hash=new HashMap}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.prototype.playNum=function(e,t,n){void 0===n&&(n=1e3);var r=this._hash.getValue(e);null==r?(r=new MoveNum,this._hash.put(e,r),r.play(e,t,n)):(r.stop(),r.play(e,t,n))},e.prototype.deleteMoveNum=function(e){this._hash.remove(e._label),e=null},e.prototype.addPicNum=function(e,t,n){void 0===n&&(n=!1);for(var r=String(t),i=0;i<r.length;i++){var o=r.charAt(i),a=new eui.Image,s="font_num"+o+"_png";n&&(s="font_numh"+o+"_png"),a.source=RES.getRes(s),a.x=20*i,e.addChild(a)}},e.prototype.getMovieClip=function(e,t){for(var n=new Array,r=0;t>r;r++){var i=e+"_"+r+"_json";n.push(i)}var o=e+"_json",a=new zmovie.ZMovieClip(n,RES.getRes(o));return a},e.prototype.playZmoveLoop=function(e,t,n,r,i){void 0===i&&(i=1);var o=this.getMovieClip(e,t);return o.x=n,o.y=r,o.isLoop=!0,o.scaleX=i,o.scaleY=i,GameLayerManager.gameLayer().effectLayer.addChild(o),o.gotoAndPlayLabel("1"),o},e.prototype.stopZmove=function(e){GameLayerManager.gameLayer().effectLayer.contains(e)&&GameLayerManager.gameLayer().effectLayer.removeChild(e),e.stop(),e=null},e.prototype.playZmove=function(e,t,n,r,i,o,a){void 0===i&&(i=null),void 0===o&&(o=1),void 0===a&&(a="1");var s=this.getMovieClip(e,t);s.endHander=i,s.x=n,s.y=r,s.isLoop=!1,s.scaleX=o,s.scaleY=o,GameLayerManager.gameLayer().effectLayer.addChild(s),s.addEventListener(zmovie.ZMovieClip.EVENT_FRAME_COMPLETE,this.endZmove,this),s.gotoAndPlayLabel(a)},e.prototype.flyText=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null)},e.prototype.getHeroAddInfoArray=function(e,t,n,r,i){var o="<font color='#9bff37'> 攻击 + "+t+"< /font>";0>t&&(o="<font color='#ca2600'> 攻击 - "+Math.abs(t)+"< /font>");var a="<font color='#9bff37'> 生命 + "+n+"< /font>";0>n&&(a="<font color='#ca2600'> 生命 - "+Math.abs(n)+"< /font>");var s="<font color='#9bff37'> 物防 + "+r+"< /font>";0>r&&(s="<font color='#ca2600'> 物防 - "+Math.abs(r)+"< /font>");var c="<font color='#9bff37'> 法防 + "+i+"< /font>";0>i&&(c="<font color='#ca2600'> 法防 - "+Math.abs(i)+"< /font>"),0!=t&&e.push(o),0!=n&&e.push(a),0!=r&&e.push(s),0!=i&&e.push(c)},e.prototype.endZmove=function(e){var t=e.target;t.stop(),t.removeEventListener(zmovie.ZMovieClip.EVENT_FRAME_COMPLETE,this.endZmove,this),GameLayerManager.gameLayer().effectLayer.contains(t)&&GameLayerManager.gameLayer().effectLayer.removeChild(t),t.endHander&&t.endHander.execute(),t=null},e.prototype.hSize=function(e){var t=e.target;t.removeEventListener(egret.Event.RESIZE,this.hSize,this),t.anchorOffsetX=.5*t.width,t.anchorOffsetY=.5*t.height,t.scaleX=0,t.scaleY=0,egret.Tween.get(t).to({scaleX:1.2,scaleY:1.2},500).call(this.flyOne,this,[t])},e.prototype.flyOne=function(e){egret.Tween.get(e).to({scaleX:1,scaleY:1},200).call(this.flyTwo,this,[e])},e.prototype.flyTwo=function(e){if("0"==e.name)egret.Tween.get(e).wait(1e3).to({y:e.y-200,alpha:0},1e3).call(this.flyEnd,this,[e]);else{var t=e.name,n=t.split("#");egret.Tween.get(e).wait(1e3).to({x:Number(n[0]),y:Number(n[1]),scaleX:0,scaleY:0},500).call(this.flyEnd,this,[e])}},e.prototype.flyEnd=function(e){GameLayerManager.gameLayer().effectLayer.contains(e)&&GameLayerManager.gameLayer().effectLayer.removeChild(e)},e}();__reflect(LN.prototype,"LN");var Log=function(){function e(){}return e.trace=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];GM.debugKey.containsKey(e)||GM.isDebug&&(t[0]="["+e+"][DebugLog]"+t[0],console.log.apply(console,t))},e}();__reflect(Log.prototype,"Log");var MoveNum=function(){function e(){this._oldValue=0,this._cValue=0,this._bAdd=!1,this._ctime=0,this._endTime=0,this._label=null,this._addVelue=0}return e.prototype.play=function(e,t,n){this._label=e,this._cValue=t,this._endTime=n,this._oldValue=Number(this._label.text),this._bAdd=!0,this._cValue<this._oldValue?(this._bAdd=!1,this._addVelue=this._oldValue-this._cValue):this._addVelue=this._cValue-this._oldValue,this._ctime=egret.getTimer()},e.prototype.stop=function(){this._label.text=String(this._cValue)},e.prototype.onEnterFrame=function(e){var t=egret.getTimer();t-=this._ctime,t>this._endTime&&(t=this._endTime);var n=Math.ceil(t*this._addVelue/this._endTime);this._bAdd?this._label.text=String(this._oldValue+n):this._label.text=String(this._oldValue-n),t==this._endTime&&LN.getInstance().deleteMoveNum(this)},e}();__reflect(MoveNum.prototype,"MoveNum");var MsgType;!function(e){var t;!function(e){e[e.SV_LOGIN=2e3]="SV_LOGIN",e[e.PLAYER_HEART_INFO=2101]="PLAYER_HEART_INFO",e[e.SV_ADD_BLOCK=3001]="SV_ADD_BLOCK",e[e.SV_CHAT=3e3]="SV_CHAT",e[e.SV_DEL_ONECHAT=3002]="SV_DEL_ONECHAT",e[e.SV_DEL_BLOCK=3003]="SV_DEL_BLOCK",e[e.MSG_END=3004]="MSG_END"}(t=e.MSG||(e.MSG={}))}(MsgType||(MsgType={}));var SlideLine=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.drawPoint=function(e,t){var n=this;this.alpha=1;var r=.5*(e.x+t.x),i=.5*(e.y+t.y);this.graphics.clear(),this.graphics.beginFill(16777215,1),this.graphics.moveTo(e.x,e.y),this.graphics.lineTo(r,i-5),this.graphics.lineTo(t.x,t.y),this.graphics.lineTo(r,i+5),this.graphics.lineTo(e.x,e.y),this.graphics.endFill(),GameLayerManager.gameLayer().effectLayer.addChild(this),egret.Tween.get(this).to({alpha:0},800).call(function(){SlideLineManager.getInstance().backLine(n),GameLayerManager.gameLayer().effectLayer.contains(n)&&GameLayerManager.gameLayer().effectLayer.removeChild(n)},this)},t}(egret.Sprite);__reflect(SlideLine.prototype,"SlideLine");var SlideLineManager=function(){function e(){this._slideLines=[],this._recordPoint=null}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.prototype.drawPoint=function(e,t){if(null==this._recordPoint)this._recordPoint=new egret.Point(e,t);else{var n=App.MathUtils.getDistance(this._recordPoint.x,this._recordPoint.y,e,t);if(n>50)if(this._slideLines.length>0)this._slideLines.pop();else{var r=new SlideLine,i=new egret.Point(e,t);r.drawPoint(this._recordPoint,i),this._recordPoint=i}}},e.prototype.backLine=function(e){this._slideLines.push(e)},e.prototype.endDraw=function(){this._recordPoint=null},e}();__reflect(SlideLineManager.prototype,"SlideLineManager");var MyUtil;!function(e){var t=function(){function e(){}return e.stringToUint=function(e){for(var t=new Uint8Array(e.length),n=0,r=e.length;r>n;++n)t[n]=e.charCodeAt(n);return t},e.uint8Tostring=function(e){var t=String.fromCharCode.apply(null,e),n=decodeURIComponent(t);return n},e.strToUTF8=function(e){if("string"!=typeof e)throw new TypeError("toUTF8 function only accept a string as its parameter.");for(var t,n,r,i=[],o=0,a=0,s=e.length;s>a;a++){if(o=e.charCodeAt(a),o>65535)throw new Error("InvalidCharacterError");o>128?2047>o?(t=String.fromCharCode(o>>>6|192),n=String.fromCharCode(63&o|128),i.push(t,n)):(t=String.fromCharCode(o>>>12|224),n=String.fromCharCode(o>>>6&63|128),r=String.fromCharCode(63&o|128),i.push(t,n,r)):i.push(e[a])}return i.join("")},e}();e.ST=t,__reflect(t.prototype,"MyUtil.ST")}(MyUtil||(MyUtil={}));var UnitUtil=function(){function e(){this._tag=["K","M","B","t","q","Q","s","S","o","n","d","U","D","T","Qt","Qd","Sd","St","O","N","v","c"],this._low=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],this._cap=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],this.unitKey=this._tag.slice(0),this.comArray(this._tag,this._low),this.comArray(this._tag,this._cap),this._r=[];for(var e=this.unitKey.length,t=0;e>t;t++)this._r.push(3*(t+1))}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.prototype.easyNumberCeil=function(e){if(!e&&0!=e)return"-";var t=new BigNum(e);if(t._e<3){var n=t._n*Math.pow(10,t._e);return Math.ceil(n).toString()}for(var r=this.unitKey.length,i=0;r>i;i++){var o=t._e-this._r[i];if(3>o){var n=t._n*Math.pow(10,o);return 0==o?(n=Math.floor(100*n)/100,n+this.unitKey[i]):1==o?(n=Math.floor(10*n)/10,parseFloat(n.toFixed(1))+this.unitKey[i]):(n=Math.floor(n),parseFloat(n.toFixed(0))+this.unitKey[i])}}return t.toString()+this.unitKey[this.unitKey.length-1]},e.prototype.easyNumber=function(e){if(e||0==e){var t=new BigNum(e);if(t._e<3){var n=t._n*Math.pow(10,t._e);return Math.round(n).toString()}for(var r=this.unitKey.length,i=0;r>i;i++){var o=t._e-this._r[i];if(3>o){var n=t._n*Math.pow(10,o);return 0==o?(n=Math.floor(100*n)/100,n+this.unitKey[i]):1==o?(n=Math.floor(10*n)/10,parseFloat(n.toFixed(1))+this.unitKey[i]):(n=Math.floor(n),parseFloat(n.toFixed(0))+this.unitKey[i])}}}},e.prototype.getUnitLevel=function(e){if(!e&&0!=e)return"-";var t=new BigNum(e);if(t._e<3)return"";for(var n=0;n<this.unitKey.length;n++){var r=t._e-this._r[n];if(3>r)return this.unitKey[n]}},e.prototype.comArray=function(e,t){for(var n=e.length,r=0;n>r;r++)for(var i=e[r],o=0,a=t;o<a.length;o++){var s=a[o];this.unitKey.push(i+s)}},e}();__reflect(UnitUtil.prototype,"UnitUtil");var Blink=function(e){function t(t,n,r){void 0===r&&(r=!0);var i=e.call(this)||this;return i._target=t,i._time=n,r&&i.start(),i}return __extends(t,e),t.prototype.start=function(){this._currTime=egret.getTimer(),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runDown,this)},t.prototype.runDown=function(e){this._target.alpha-=.045,this.checkOver()||this._target.alpha<=.6&&(this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runDown,this),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runUp,this))},t.prototype.runUp=function(e){this._target.alpha+=.045,this.checkOver()||this._target.alpha>=1&&(this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runUp,this),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runDown,this))},t.prototype.checkOver=function(){var e=egret.getTimer();return e-this._currTime>=this._time?(this.destroy(),!0):!1},t.prototype.destroy=function(){this._target.alpha=1,this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runDown,this),this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runUp,this),this.dispatchEventWith(egret.Event.COMPLETE,!1,this._target),this._target=null},t}(egret.EventDispatcher);__reflect(Blink.prototype,"Blink");var TipsUtils;!function(e){function t(e,t){void 0===e&&(e=""),void 0===t&&(t=!1);var n=GM.gamec.curWidth(),r=GM.gamec.curHeight(),i=new egret.TextField;i.size=24,i.y=.4*r,t?i.textColor=GM.gamec.TEXT_COLORS.red:i.textColor=GM.gamec.TEXT_COLORS.green,i.alpha=0,i.textFlow=(new egret.HtmlTextParser).parser(e),i.fontFamily="黑体",i.strokeColor=0,i.x=n/2-i.width/2,i.stroke=2,i.bold=!0,i.textAlign=egret.HorizontalAlign.CENTER,GameLayerManager.gameLayer().effectLayer.contains(i)||GameLayerManager.gameLayer().effectLayer.addChild(i);var o=function(){GameLayerManager.gameLayer().effectLayer.contains(i)&&(GameLayerManager.gameLayer().effectLayer.removeChild(i),i=null)},a=function(){egret.Tween.get(i).to({alpha:0},2e3).call(o,this)};i.visible=!0,egret.Tween.get(i).to({y:i.y-120,alpha:1},800,egret.Ease.backOut).call(a,this)}function n(e,t,n){void 0===e&&(e=""),void 0===t&&(t=!1),void 0===n&&(n=!0);var r=GM.gamec.curHeight(),i=GM.gamec.curWidth(),o=new egret.TextField;o.size=24,o.y=.5*i,t?o.textColor=GM.gamec.TEXT_COLORS.red:o.textColor=GM.gamec.TEXT_COLORS.green,o.alpha=0,o.textFlow=(new egret.HtmlTextParser).parser(e),o.fontFamily="黑体",o.strokeColor=0,n?o.x=-o.width:o.x=r,o.stroke=2,o.bold=!0,o.textAlign=egret.HorizontalAlign.CENTER,GameLayerManager.gameLayer().effectLayer.contains(o)||GameLayerManager.gameLayer().effectLayer.addChild(o),n?egret.Tween.get(o).to({x:r/2-o.width/2-50,alpha:1},300,egret.Ease.sineInOut):egret.Tween.get(o).to({x:i/2-o.width/2+50,alpha:1},300,egret.Ease.sineInOut),egret.setTimeout(function(){n?egret.Tween.get(o).to({x:o.x+100},500):egret.Tween.get(o).to({x:o.x-100},500)},this,300),egret.setTimeout(function(){n?egret.Tween.get(o).to({x:r},300,egret.Ease.sineIn):egret.Tween.get(o).to({x:-o.width},300,egret.Ease.sineIn)},this,800),egret.setTimeout(function(){GameLayerManager.gameLayer().effectLayer.contains(o)&&(GameLayerManager.gameLayer().effectLayer.removeChild(o),o=null)},this,1100)}function r(e,t){void 0===e&&(e=""),void 0===t&&(t=!1);var n=GM.gamec.curHeight(),r=GM.gamec.curWidth(),i=new egret.TextField;i.size=24,i.y=r/2,t?i.textColor=GM.gamec.TEXT_COLORS.red:i.textColor=GM.gamec.TEXT_COLORS.green,i.alpha=0,i.textFlow=(new egret.HtmlTextParser).parser(e),i.fontFamily="黑体",i.strokeColor=0,i.x=n/2,i.stroke=2,i.bold=!0,i.textAlign=egret.HorizontalAlign.CENTER,AnchorUtil.setAnchorX(i,.5),AnchorUtil.setAnchorY(i,.5),i.scaleX=0,i.scaleY=0,GameLayerManager.gameLayer().effectLayer.contains(i)||GameLayerManager.gameLayer().effectLayer.addChild(i);var o=function(){GameLayerManager.gameLayer().effectLayer.contains(i)&&(GameLayerManager.gameLayer().effectLayer.removeChild(i),i=null)};egret.Tween.get(i).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){egret.Tween.get(i).to({alpha:0},500).call(o,this)
},this,1e3)}function i(e,t){void 0===e&&(e=""),void 0===t&&(t=!1);var n=new egret.TextField,r=GM.gamec.curHeight(),i=GM.gamec.curWidth();n.size=24,n.y=i/2,t?n.textColor=GM.gamec.TEXT_COLORS.red:n.textColor=GM.gamec.TEXT_COLORS.green,n.alpha=0,n.textFlow=(new egret.HtmlTextParser).parser(e),n.fontFamily="黑体",n.strokeColor=0,n.x=r/2,n.stroke=2,n.bold=!0,n.textAlign=egret.HorizontalAlign.CENTER,AnchorUtil.setAnchorX(n,.5),AnchorUtil.setAnchorY(n,.5),n.scaleX=4,n.scaleY=4,GameLayerManager.gameLayer().effectLayer.contains(n)||GameLayerManager.gameLayer().effectLayer.addChild(n);var o=function(){GameLayerManager.gameLayer().effectLayer.contains(n)&&(GameLayerManager.gameLayer().effectLayer.removeChild(n),n=null)};egret.Tween.get(n).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){egret.Tween.get(n).to({alpha:0},500).call(o,this)},this,1e3)}function o(e,t){void 0===e&&(e=""),void 0===t&&(t=!1);var n=new egret.Sprite,r=new egret.TextField,i=GM.gamec.curHeight(),o=GM.gamec.curWidth();r.size=24,r.y=.2*o,t?r.textColor=GM.gamec.TEXT_COLORS.red:r.textColor=GM.gamec.TEXT_COLORS.green,r.textFlow=(new egret.HtmlTextParser).parser(e),r.fontFamily="黑体",r.strokeColor=0,r.x=i,r.stroke=2,r.bold=!0,r.textAlign=egret.HorizontalAlign.CENTER,GameLayerManager.gameLayer().effectLayer.contains(r)||(n.graphics.beginFill(0,.4),n.graphics.drawRect(0,.2*o-7,960,40),n.graphics.endFill(),GameLayerManager.gameLayer().effectLayer.addChild(n),GameLayerManager.gameLayer().effectLayer.addChild(r)),egret.Tween.get(r).to({x:-r.width},1e4),egret.setTimeout(function(){GameLayerManager.gameLayer().effectLayer.contains(r)&&(n.graphics.clear(),GameLayerManager.gameLayer().effectLayer.removeChild(r),GameLayerManager.gameLayer().effectLayer.removeChild(n),r=null)},this,1e4)}e.showTipsDownToUp=t,e.showTipsLeftOrRight=n,e.showTipsFromCenter=r,e.showTipsBigToSmall=i,e.showTipsNotice=o}(TipsUtils||(TipsUtils={}));var one;!function(e){function t(e){e.style.position="absolute",e.style.border="0",e.style.left="0px",e.style.top="0px"}var n=function(){function e(){}return e.initDOMRoot=function(n){var r=this,i=document.getElementById("egretDOMRoot");if(null==i){var o=document.getElementsByClassName("egret-player")[0];i=document.createElement("div"),t(i),i.setAttribute("id","egretDOMRoot"),o.appendChild(i),e.tempStage=n;var a=function(){var e=document.getElementsByClassName("egret-player")[0],t=e.getElementsByTagName("canvas")[0],n=e.getBoundingClientRect(),o=t.getBoundingClientRect(),a=!1,s=r.tempStage.orientation;s!=egret.OrientationMode.AUTO&&(a=s!=egret.OrientationMode.PORTRAIT&&n.height>n.width||s==egret.OrientationMode.PORTRAIT&&n.width>n.height);var c,h;a?(c=o.width/t.height,h=o.height/t.width):(c=o.width/t.width,h=o.height/t.height),i.style.left=t.style.left,i.style.top=t.style.top,i.style.transformOrigin="0% 0% 0px",i.style.transform=t.style.transform+" scale(1,1)"};this.tempStage.addEventListener(egret.Event.RESIZE,a,this),a()}},e.getDOMRoot=function(){var e=document.getElementById("egretDOMRoot");return e},e}();__reflect(n.prototype,"DOMRoot");var r=function(){function e(){this.lastMatrix=new egret.Matrix,this.lastWidth=0,this.lastHeight=0,this.node=document.createElement("div"),t(this.node)}return e.prototype.mapDisplayObject=function(e){this.dp=e},e.prototype.swapDom=function(e,t){var n=document.createElement("tempDiv");e.parentNode.insertBefore(n,e),t.parentNode.insertBefore(e,t),n.parentNode.insertBefore(t,n),n.parentNode.removeChild(n)},e.prototype.show=function(){n.initDOMRoot(this.dp.stage);var e=n.getDOMRoot();e.appendChild(this.node)},e.prototype.hide=function(){var e=n.getDOMRoot();e&&e.parentNode&&e.parentNode.removeChild(e)},e.prototype.bind=function(e){this.unbind(),this.element=e,this.element.style.width="100%",this.element.style.height="100%",t(this.element),this.node.appendChild(e)},e.prototype.unbind=function(){this.element&&this.element.parentNode==this.node&&this.node.removeChild(this.element),this.element=null},e.prototype.updatePosition=function(){var e=this.dp;if(null!=e.stage){for(var t=!0,n=e;n&&n!=e.stage;){if(!n.visible||0==n.alpha){t=!1;break}n=n.parent}if(t)this.element&&null==this.element.parentNode&&this.node.appendChild(this.element);else if(this.element&&this.element.parentNode)return void this.element.parentNode.removeChild(this.element);var r=e.$getConcatenatedMatrix();if(this.lastMatrix.a!=r.a||this.lastMatrix.b!=r.b||this.lastMatrix.c!=r.c||this.lastMatrix.d!=r.d||this.lastMatrix.tx!=r.tx||this.lastMatrix.ty!=r.ty){var i=egret.web.getPrefixStyleName("transform");this.node.style.transformOrigin="0% 0% 0px",this.node.style[i]="matrix("+r.a+","+r.b+","+r.c+","+r.d+","+r.tx+","+r.ty+")",this.lastMatrix.a=r.a,this.lastMatrix.b=r.b,this.lastMatrix.c=r.c,this.lastMatrix.d=r.d,this.lastMatrix.tx=r.tx,this.lastMatrix.ty=r.ty}var o=e.width;this.lastWidth!=o&&(this.node.style.width=o+"px",this.lastWidth=o);var a=e.height;this.lastHeight!=a&&(this.node.style.height=a+"px",this.lastHeight=a)}},e}();e.DOMNode=r,__reflect(r.prototype,"one.DOMNode")}(one||(one={}));var GameConfigManager=function(){function e(){this.TEXT_COLORS={black:0,blue:1742039,green:58624,grayblue:4180940,golden:16766720,white:16777215,milkWhite:16511407,grayWhite:8421504,yellow:16776960,lightYellow:16765813,orangeYellow:16032837,red:14228790,purple:14564160,pink:16724016,ligthRed:13702568},this.LABEL_FONT_SIZE={bigSize:36,littleSize:12,middleSize:18,normalSize:24}}return e.prototype.systemType=function(){if(egret.Capabilities.runtimeType!=egret.RuntimeType.NATIVE){var e=window.navigator.userAgent.toLowerCase();""+e.match(/MicroMessenger/i);return""+e.match(/windows nt/i)=="windows nt"?"windows":""+e.match(/iphone/i)=="iphone"?"ios":""+e.match(/android/i)=="android"?"android":""+e.match(/ipad/i)=="ipad"?"ipad":""+e.match(/linux/i)=="linux"?"linux":""+e.match(/mac/i)=="mac"?"mac":""+e.match(/ucbrower/i)=="ucbrower"?"ucbrower":void Log.trace("debug","未知系统类型")}},e.prototype.init=function(){var e=document.getElementsByClassName("egret-player")[0];this.originWidth=Number(e.getAttribute("data-content-width")),this.originHeight=Number(e.getAttribute("data-content-height"))},e.prototype.curStage=function(){return egret.MainContext.instance.stage},e.prototype.curWidth=function(){return egret.MainContext.instance.stage.stageWidth},e.prototype.curHeight=function(){return egret.MainContext.instance.stage.stageHeight},e.prototype.getOriginWidth=function(){return this.originWidth},e.prototype.getOriginHeight=function(){return this.originHeight},e}();__reflect(GameConfigManager.prototype,"GameConfigManager");var one;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.video=document.createElement("video"),t.video.autoplay=!0,t.video.controls=!0,t.bind(t.video),t}return __extends(t,e),Object.defineProperty(t.prototype,"src",{get:function(){return this._src},set:function(e){this._src=e,this.video.src=e},enumerable:!0,configurable:!0}),t.prototype.contentFullScreen=function(){var e="position: absolute; border: 0px; left: 0px; top: 0px; object-fit: contain;",t=document.getElementsByClassName("egret-player")[0],n=t.getElementsByTagName("canvas")[0];this.video.width=n.width,this.video.height=n.height,this.video.style.cssText=e},t.prototype.enableAutoPlay=function(e){this.video.autoplay=e},t.prototype.enableControls=function(e){this.video.controls=e},t.prototype.swapHierarchy=function(){var e=document.getElementsByClassName("egret-player")[0],t=e.getElementsByTagName("canvas")[0],n=this.getDomNode(),r=document.getElementById("egretDOMRoot");n.swapDom(r,t)},t}(e.WebNode);e.WebVideo=t,__reflect(t.prototype,"one.WebVideo")}(one||(one={}));var one;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.iframe=document.createElement("iframe"),t.bind(t.iframe),t}return __extends(t,e),Object.defineProperty(t.prototype,"src",{get:function(){return this._src},set:function(e){this._src=e,this.iframe.src=e},enumerable:!0,configurable:!0}),t.prototype.setAllowFullscreen=function(e){this.iframe.allowFullscreen=e},t}(e.WebNode);e.WebView=t,__reflect(t.prototype,"one.WebView")}(one||(one={}));var zmovie;!function(e){var t=function(t){function n(e,n,r){var i=t.call(this)||this;return i.setObject(e,n,r),i}return __extends(n,t),n.prototype.setObject=function(t,n,r){if(this.libObj!=n||this.libName!=r){this.libName=r,this.libObj=n,e.Util.clearDisposeDisplay(this);for(var i=e.Util.getTextureArrByName(t,n,r),o=i.length,a=o-1;a>=0;a--){var s=i[a],c=new egret.Bitmap;c.touchEnabled=!1,c.texture=s.t,c.x=s.x/n.scale,c.y=s.y/n.scale,this.addChild(c)}}},n}(egret.DisplayObjectContainer);e.LargeImage=t,__reflect(t.prototype,"zmovie.LargeImage")}(zmovie||(zmovie={}));var zmovie;!function(e){var t=function(){function e(){}return e.clearDisposeDisplay=function(e){try{for(var t=void 0,n=e.numChildren-1;n>=0;n--)t=e.getChildAt(n),e.removeChild(t)}catch(r){}},e.getTextureArrByName=function(t,n,r){var i=[],o=e.getTextureByName(t,r);if(null==o){var a=n.clipping[r];if(null!=a)for(var s=a.length-1;s>=0;s--){if(o=e.getTextureByName(t,a[s].name),null==o)return i;i.push({t:o,x:a[s].x,y:a[s].y})}return i}return i.push({t:o,x:0,y:0}),i},e.getTextureByName=function(e,t){var n=null;try{n=RES.getRes(e+"."+t)}catch(r){}try{if(null==n)for(var i=e,o=i.length-1;o>=0;o--){var a=RES.getRes(i[o]+"."+t);if(null!=a)return a}}catch(r){}return n},e}();e.Util=t,__reflect(t.prototype,"zmovie.Util")}(zmovie||(zmovie={}));var zmovie;!function(e){var t=function(){function e(){}return e}();e.ZAssetManager=t,__reflect(t.prototype,"zmovie.ZAssetManager")}(zmovie||(zmovie={}));var zmovie;!function(e){var t=function(e){function t(t){var n=e.call(this)||this;return n.img=new egret.Bitmap,n.addChild(n.img),n.setTexture(t),n}return __extends(t,e),t.prototype.setTexture=function(e){this.img.texture=e},t.prototype.setScale=function(e){this.img.scaleX=1/e,this.img.scaleY=1/e},t}(egret.DisplayObjectContainer);e.ZImage=t,__reflect(t.prototype,"zmovie.ZImage")}(zmovie||(zmovie={}));var zmovie;!function(e){var t=function(t){function n(e,n,r,i){void 0===r&&(r=null),void 0===i&&(i=1);var o=t.call(this)||this;return o.isPlay=!1,o.endHander=null,o.setMovieObject(e,n,r,i),o.addEventListener(egret.Event.REMOVED_FROM_STAGE,o.onDestory,o),o}return __extends(n,t),n.getFrameMovieObject=function(e,t){return null==e.f_arr&&(e.f_arr=[]),e.f_arr.unshift(e),e},n.prototype.onDestory=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onDestory,this),this.disposeLayerImg()},n.prototype.getTotalFrame=function(){return this.totalFrame},n.prototype.getCurrPlayLabel=function(){return this.currPlaylabel},n.prototype.getCurrFrame=function(){return this.currFrame},n.prototype.getIsPlay=function(){return this.isPlay},n.prototype.setTimeScale=function(e){0>=e&&(e=.01),this._timeScale=e,null!=this.mcObj&&(this.frameTime=this.mcObj.frameTime/e);for(var t=this.numChildren-1;t>=0;t--){var r=null;this.getChildAt(t)instanceof n&&(r=this.getChildAt(t)),null!=r&&r.setTimeScale(e)}},n.prototype.getTimeScale=function(){return this._timeScale},n.prototype.getLabels=function(){return this.mcObj.frameLabels},n.prototype.getIsExistLabel=function(e){return null!=this.mcObj.frameLabels&&null!=this.mcObj.frameLabels[e]?!0:!1},n.prototype.getCurrLabelObj=function(){var e=this.getLabels();if(null!=e)for(var t in e)if(this.currFrame>=e[t].begin){if(null!=e[t].end&&this.currFrame>=e[t].end)continue;return e[t]}return null},n.prototype.gotoAndPlayLabel=function(e,t){void 0===t&&(t=!1);var r;return null!=this.mcObj.frameLabels&&(r=this.mcObj.frameLabels[e],null!=r?(this.currPlaylabel=e,this.beginFrame=r.begin,null==r.end||t?this.endFrame=-1:this.endFrame=r.end-1,this.gotoAndPlay(this.beginFrame)):(this.beginFrame=0,this.endFrame=-1,this.currPlaylabel=null,this.gotoAndPlay(this.beginFrame)),this.dispatchEventWith(n.EVENT_GOTOANDPLAYLABEL,!1,e)),r},n.prototype.disposeLayerImg=function(){if(null!=this.layerArr)for(var e=this.layerArr.length-1;e>=0;e--){var t=this.layerArr[e].img;null!=t&&null!=t.parent&&t.parent.removeChild(t);var n=this.layerArr[e].mc;null!=n&&null!=n.parent&&n.parent.removeChild(n);var r=this.layerArr[e].li;null!=r&&null!=r.parent&&r.parent.removeChild(r)}},n.prototype.setMovieObject=function(e,t,r,i){void 0===i&&(i=1),null==r&&(r="root"),this.imgArr=e,this.libObj=t,this._mcName=r,this.mcObj=t.mcObjs[r],this.areaObj=this.mcObj.areaObject,this.libScale=1,this._direction=1,this.fmObj=this.mcObj.frameMoveObj,this.currFrame=-1,this.totalFrame=this.mcObj.totalFrame,this.frameTime=this.mcObj.frameTime,this.beginFrame=0,this.endFrame=-1,this._timeScale=1,this.isLoop=!0,this.disposeLayerImg(),this.parentCFOObj={},this.layerArr=new Array,this.currArea=null;for(var o=this.mcObj.layers,a=o.length,s=0;a>s;s++){for(var c=new Array,h=o[s],l=h.length,u=null,p=void 0,g=0;l>g;g++){var f=h[g],d=null;if(null==f.matrix){var m=f.frameNum;for(null==f.libName&&null!=u&&null!=f.x&&(f.libName=u.libName),null==f.a&&(f.a=1),null==f.b&&(f.b=0),null==f.c&&(f.c=0),null==f.d&&(f.d=1),null==f.al&&(f.al=1),null==f.cx?f.cx=0:f.cx*=-1,null==f.cy?f.cy=0:f.cy*=-1,null==f.r&&(f.r=0),null==f.sx&&(f.sx=1),null==f.sy&&(f.sy=1),(null!=f.scaleX||null!=f.scaleY||null!=f.scaleZ||null!=f.rotationX||null!=f.rotationY||null!=f.rotationZ)&&(d={},d.scaleX=f.scaleX,d.scaleY=f.scaleY,d.scaleZ=f.scaleZ,d.x=f.x,d.y=f.y,d.cx=f.cx,d.cy=f.cy,f.cx=0,f.cy=0,f.x=0,f.y=0,d.rotationX=f.rotationX,d.rotationY=f.rotationY,d.rotationZ=f.rotationZ,null==d.scaleX&&(d.scaleX=1),null==d.scaleY&&(d.scaleY=1),null==d.scaleZ&&(d.scaleZ=1),null==d.rotationX&&(d.rotationX=0),null==d.rotationY&&(d.rotationY=0),null==d.rotationZ&&(d.rotationZ=0)),f.matrix=new egret.Matrix(f.a,f.b,f.c,f.d,f.x,f.y),p=0;m>p;p++)n.getFrameMovieObject(f,p+1);for(var y in f)"id"!=y&&"maskID"!=y&&"op"!=y&&"mcName"!=y&&"matrix"!=y&&"al"!=y&&"libName"!=y&&"f_arr"!=y&&"cx"!=y&&"cy"!=y&&"r"!=y&&"sx"!=y&&"sy"!=y&&delete f[y];null!=d&&(f.obj3d=d)}c.push(f);var _=f.f_arr;if(null!=_)for(p=_.length-1;p>=0;p--)c.push(_[p]);u=f}this.layerArr.push({frames:c})}this.parentPlayTime=0,this.scale=i,this.advanceTime()},n.prototype.nextFrame=function(){this.stop(),this.parentPlayTime=0,this.isPlay=!0,this.advanceTime(),this.isPlay=!1},n.prototype.prevFrame=function(){this.stop(),this.currFrame-=2,-1>this.currFrame&&(this.currFrame=this.totalFrame-2),-1>this.currFrame&&(this.currFrame=-1),this.parentPlayTime=0,this.isPlay=!0,this.advanceTime(),this.isPlay=!1},n.prototype.stop=function(){if(this.isPlay){this.isPlay=!1,this.removeEventListener(egret.Event.ENTER_FRAME,this.advanceTime,this);for(var e=this.numChildren-1;e>=0;e--)if(this.getChildAt(e)instanceof n){var t=this.getChildAt(e);t.stop()}}},n.prototype.play=function(){if(!this.isPlay){this.isPlay=!0,this.addEventListener(egret.Event.ENTER_FRAME,this.advanceTime,this);for(var e=this.numChildren-1;e>=0;e--)if(this.getChildAt(e)instanceof n){var t=this.getChildAt(e);this.mcObj.frameTime!=t.mcObj.frameTime&&t.play()}}},n.prototype.gotoAndStop=function(e){this.stop(),this.currFrame=e-1,this.parentPlayTime=0,this.isPlay=!0,this.advanceTime(),this.isPlay=!1},n.prototype.gotoAndPlay=function(e){this.currFrame=e-1,this.parentPlayTime=0,this.advanceTime(),this.play()},n.prototype.advanceTime=function(){var t=(new Date).getTime();if(this.frameTime<t-this.parentPlayTime){if(this.parentPlayTime=t,this.currFrame++,this.currFrame>=this.totalFrame||-1!=this.endFrame&&this.currFrame>this.endFrame){if(!this.isLoop)return this.currFrame-=1,this.stop(),void this.frameComplete();if(this.frameComplete(),!this.isPlay)return;this.currFrame=this.beginFrame}for(var r=void 0,i=this.layerArr.length,o=0;i>o;o++)try{var a=this.layerArr[o],s=a.frames,c=void 0,h=null,l=null,u=null;a.img instanceof e.ZImage&&(h=a.img),a.mc instanceof n&&(l=a.mc),a.li instanceof e.LargeImage&&(u=a.li);try{if(c=s[this.currFrame],this.parentCFOObj[o]==c||null==c){null!=l&&null!=l.parent&&this.mcObj.frameTime==l.mcObj.frameTime&&l.nextFrame();continue}this.parentCFOObj[o]=c}catch(p){null!=h&&this==h.parent&&this.removeChild(h),null!=l&&null!=l.parent&&(l.stop(),l.parent.removeChild(l)),null!=u&&this==u.parent&&this.removeChild(u);continue}if(null==c.libName)null!=h&&this==h.parent&&this.removeChild(h),null!=l&&null!=l.parent&&(l.stop(),l.parent.removeChild(l)),null!=u&&this==u.parent&&this.removeChild(u);else{var g=e.Util.getTextureByName(this.imgArr,c.libName);if(null==g){var f=void 0;null==this.libObj.mcObjs[c.libName]?(null==u?(u=new e.LargeImage(this.imgArr,this.libObj,c.libName),u.touchEnabled=!1,a.li=u,u.imgDepth=o):u.setObject(this.imgArr,this.libObj,c.libName),f=u,u.matrix=c.matrix,null==u.parent&&this.addChildToDepth(u),null!=l&&this==l.parent&&(this.removeChild(l),l.visible=!1)):(null==l?(l=new n(this.imgArr,this.libObj,c.libName),l.touchEnabled=!1,a.mc=l,l.imgDepth=o):c.libName!=l._mcName&&l.setMovieObject(this.imgArr,this.libObj,c.libName),f=l,null==l.parent?(this.isPlay?this.mcObj.frameTime==l.mcObj.frameTime?l.gotoAndStop(0):l.gotoAndPlay(0):l.gotoAndStop(0),l.setTimeScale(this._timeScale),this.addChildToDepth(l)):this.mcObj.frameTime==l.mcObj.frameTime&&l.nextFrame(),this==l.parent&&(l.matrix=c.matrix),null!=u&&this==u.parent&&this.removeChild(u)),f.anchorOffsetX=c.cx,f.anchorOffsetY=c.cy,f.alpha=c.al,null!=h&&this==h.parent&&this.removeChild(h)}else null==h?(h=new e.ZImage(g),h.imgDepth=o,h.touchEnabled=!1,a.img=h):h.setTexture(g),null!=this.libObj.imgScale&&null!=this.libObj.imgScale[c.libName]?h.setScale(this.libObj.scale*this.libObj.imgScale[c.libName]):h.setScale(this.libObj.scale),h.displayLibName=c.libName,h.matrix=c.matrix,h.anchorOffsetX=c.cx,h.anchorOffsetY=c.cy,h.alpha=c.al,null==h.parent&&this.addChildToDepth(h),null!=l&&null!=l.parent&&(l.stop(),l.parent.removeChild(l)),null!=u&&this==u.parent&&this.removeChild(u)}var d=null;if(null!=h&&null!=h.parent?d=h:null!=l&&null!=l.parent?d=l:null!=u&&null!=u.parent&&(d=u),null!=d){if(null!=c.maskID){if(null!=r&&null!=r[c.maskID]&&null==d.parent.mask){var m=r[c.maskID],y=new egret.Rectangle(m.x,m.y,m.width,m.height);d.parent.mask=y}}else null!=c.id&&(null==r&&(r={}),r[c.id]=d,d.visible=!1);null!=c.mcName&&(d.name=c.mcName,this.dispatchEventWith(n.EVENT_MC_NAME,!1,d))}}catch(p){}if(null!=this.fmObj){var _=this.fmObj[this.currFrame];null!=_&&(null==_[this._scale]&&(_[this._scale]={},_[this._scale].x=_.x*this._scale,_[this._scale].y=_.y*this._scale,_[this._scale].moveType=_.moveType),this.dispatchEventWith(n.EVENT_MOVE,!1,_[this._scale]))}this.framePlay()}},n.prototype.frameComplete=function(){this.dispatchEventWith(n.EVENT_FRAME_COMPLETE,!1)},n.prototype.framePlay=function(){null!=this.areaObj&&(this.currArea=this.areaObj[this.currFrame],null!=this.currArea&&this.dispatchEventWith(n.EVENT_AREA,!1,this.currArea)),this.dispatchEventWith(n.EVENT_ENTER_FRAME)},n.prototype.addChildToDepth=function(e){var t=this.numChildren-1;if(0==t)return void this.addChild(e);for(var n=t;n>=0;n--)try{var r=this.getChildAt(n);if(null!=r&&r.imgDepth<e.imgDepth)return void(t==n?this.addChild(e):this.addChildAt(e,n+1))}catch(i){}this.addChildAt(e,0)},n.EVENT_FRAME_COMPLETE="frameComplete",n.EVENT_MOVE="move",n.EVENT_ENTER_FRAME="enterFrame",n.EVENT_MC_NAME="mcName",n.EVENT_AREA="area",n.EVENT_GOTOANDPLAYLABEL="gotoAndPlayLabel",n}(egret.DisplayObjectContainer);e.ZMovieClip=t,__reflect(t.prototype,"zmovie.ZMovieClip")}(zmovie||(zmovie={}));